{"version":3,"sources":["app.js"],"names":["window","document","undefined","angular","module","config","$urlRouterProvider","localStorageServiceProvider","otherwise","setPrefix","toastr","options","closeButton","debug","newestOnTop","progressBar","positionClass","preventDuplicates","onclick","showDuration","hideDuration","timeOut","extendedTimeOut","showEasing","hideEasing","showMethod","hideMethod","run","localStorageService","articles","$rootScope","$log","getAllArticles","then","response","$emit","set","error","data","get","warning","controller","$scope","$http","$state","remove","$on","event","toState","toParams","currentStateName","name","currentStateParams","countCartItems","getUserData","getAllGenres","genres","logout","success","go","user","userName","userRole","role","cart","quantity","forEach","item","directive","restrict","link","scope","element","attrs","bind","isImage","$apply","filter","items","search","result","toLowerCase","value","key","indexOf","push","$stateProvider","state","url","templateUrl","checkPlatforms","selected","platform","bool","validatePrice","input","test","fsk","isTouched","isPriceInvalid","isPriceTouched","isCustomGenre","genreButtonText","changeInputStyle","priceValidation","price","genre","customGenre","console","log","imageToBase64","files","reader","FileReader","onload","e","image","target","readAsDataURL","addArticle","title","wiiu","windows","ps","xbox","osx","release","language","minRam","minProcessor","description","id","platforms","$stateParams","$uibModal","tab","active","calculateAverageStars","count","stars","changeTab","type","actualGame","reviews","getElementById","innerHTML","toCart","parseInt","itemId","starsActivator","numbers","i","starHover","number","leave","rate","newReviewId","message","review","author","modalInstance","open","animation","resolve","searchInout","isArticles","updateTotalPrice","totalPrice","article","newObject","quantityChange","date","Date","orders","isFormTouched","toCheckout","info","password","$","keydown","keyCode","click","login","factory","$q","trimPlatforms","trimmed","trim","service","q","defer","mapped","_mapArticles","reject","promise","this","ID","toString","Name","Genre","Preis","FSK","Plattformen","Release","Sprache","parseFloat","Beschreibung","Rezensionen","post","mappedItems","isNewGenre","mappedItem","_mapReviews","$uibModalInstance","checkValid","isValid","submit","close","cancel","dismiss","email","passwordConfirm","register","username"],"mappings":"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","file":"app.min.js","sourcesContent":["(function(window, document, undefined) {\n'use strict';\nangular.module('app', [\r\n    'ui.router',\r\n    'ui.bootstrap',\r\n    'LocalStorageModule',\r\n    'ngAnimate',\r\n    'templates',\r\n    'textAngular',\r\n    // 'ngSanitize',\r\n    'app.home',\r\n    'app.addArticle',\r\n    'app.topGames',\r\n    'app.newGames',\r\n    'app.gameDetail',\r\n    'app.login',\r\n    'app.genre',\r\n    'app.cart',\r\n    'app.checkout',\r\n    'app.orders',\r\n    'app.userAdministration',\r\n    'app.register',\r\n    'app.passwordForget'\r\n])\r\n    .config([\"$urlRouterProvider\", \"localStorageServiceProvider\", function ($urlRouterProvider, localStorageServiceProvider) {\r\n        $urlRouterProvider.otherwise('/home');\r\n        localStorageServiceProvider.setPrefix('webshop');\r\n        toastr.options = {\r\n            \"closeButton\": false,\r\n            \"debug\": false,\r\n            \"newestOnTop\": true,\r\n            \"progressBar\": false,\r\n            \"positionClass\": \"toast-bottom-right\",\r\n            \"preventDuplicates\": false,\r\n            \"onclick\": null,\r\n            \"showDuration\": \"300\",\r\n            \"hideDuration\": \"1000\",\r\n            \"timeOut\": \"5000\",\r\n            \"extendedTimeOut\": \"1000\",\r\n            \"showEasing\": \"swing\",\r\n            \"hideEasing\": \"linear\",\r\n            \"showMethod\": \"fadeIn\",\r\n            \"hideMethod\": \"fadeOut\"\r\n        }\r\n    }])\r\n    .run([\"localStorageService\", \"articles\", \"$rootScope\", \"$log\", function (localStorageService, articles, $rootScope, $log) {\r\n        articles.getAllArticles()\r\n            .then(function (response) {\r\n                $rootScope.$emit('genresLoaded');\r\n                localStorageService.set('articles', response);\r\n            }, function (error) {\r\n                var data = localStorageService.get('articles');\r\n                if (data) {\r\n                    toastr.warning('Artikel konnten nicht neu geladen werden. Daten sind möglicherweise veraltet.')\r\n                } else {\r\n                    toastr.error('Artikel konnten nicht geladen werden.');\r\n                }\r\n                $log.error(error);\r\n            });\r\n        localStorageService.set('fromCheckout', false);\r\n    }])\r\n    .controller('AppCtrl', [\"$scope\", \"$rootScope\", \"$http\", \"localStorageService\", \"$state\", \"articles\", \"$log\", function ($scope, $rootScope, $http, localStorageService, $state, articles, $log) {\r\n        localStorageService.remove('checkout');\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            function (event, toState, toParams) {\r\n                $scope.currentStateName = toState.name;\r\n                $scope.currentStateParams = toParams.name;\r\n            });\r\n\r\n        $rootScope.$on('itemAddedToCart', function () {\r\n            countCartItems();\r\n        });\r\n\r\n        $rootScope.$on('login', function () {\r\n            getUserData();\r\n        });\r\n\r\n        $rootScope.$on('genresLoaded', function () {\r\n            articles.getAllGenres()\r\n                .then(function (response) {\r\n                    $scope.genres = response;\r\n                }, function (error) {\r\n                    $log.error(error);\r\n                })\r\n        });\r\n\r\n        $scope.logout = function () {\r\n            localStorageService.remove('user');\r\n            localStorageService.remove('orders');\r\n            localStorageService.remove('checkout');\r\n            // update user data\r\n            $rootScope.$emit('login');\r\n            $rootScope.$emit('itemAddedToCart');\r\n            toastr.success('Logout war erfolgreich.');\r\n            $state.go('login');\r\n        };\r\n\r\n        var getUserData = function () {\r\n            var user = localStorageService.get('user') || {};\r\n            $scope.userName = user.userName || 'Benutzer';\r\n            $scope.userRole = user.role;\r\n        };\r\n        getUserData();\r\n\r\n        var countCartItems = function () {\r\n            var cart = localStorageService.get('cart');\r\n            $scope.quantity = 0;\r\n            angular.forEach(cart, function (item) {\r\n                $scope.quantity += item.quantity;\r\n            });\r\n        };\r\n        countCartItems();\r\n    }])\r\n    .directive('imageonload', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                element.bind('load', function () {\r\n                    scope.isImage = true;\r\n                    scope.$apply();\r\n                });\r\n                element.bind('error', function () {\r\n                    scope.isImage = false;\r\n                    scope.$apply();\r\n                });\r\n            }\r\n        };\r\n    })\r\n    .filter('objectFilter', function () {\r\n        return function (items, search) {\r\n            var result = [];\r\n            search = search ? search.toLowerCase() : '';\r\n            angular.forEach(items, function (value, key) {\r\n                if (value.name.toLowerCase().indexOf(search) !== -1) {\r\n                    result.push(value);\r\n                }\r\n            });\r\n            return result;\r\n\r\n        }\r\n    });\n\r\nangular.module('app.addArticle', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('addArticle', {\r\n            url : '/addArticle',\r\n            templateUrl : 'app/addArticle/addArticle.html',\r\n            controller : 'AddArticleCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('AddArticleCtrl', [\"$scope\", \"articles\", \"$log\", function ($scope, articles, $log) {\r\n        $scope.selected = {};\r\n        $scope.selected.platform = {};\r\n        $scope.selected.fsk = '0';\r\n        $scope.isTouched = false;\r\n        $scope.isPriceInvalid = false;\r\n        $scope.isPriceTouched = false;\r\n        $scope.isCustomGenre = false;\r\n        $scope.genreButtonText = 'Neues Genre anlegen';\r\n\r\n        function checkPlatforms() {\r\n            var selected = [];\r\n            angular.forEach($scope.selected.platform, function (bool, key) {\r\n                if (bool) {\r\n                    selected.push(key);\r\n                }\r\n            });\r\n            return selected;\r\n        }\r\n\r\n\r\n        articles.getAllGenres()\r\n            .then(function (response) {\r\n                $scope.genres = response;\r\n            }, function (error) {\r\n                $log.error(error);\r\n            });\r\n\r\n        function validatePrice(input) {\r\n            return /(?=.)^\\$?(([1-9][0-9]{0,2}(,[0-9]{3})*)|[0-9]+)?(\\.[0-9]{1,2})?$/.test(input);\r\n        }\r\n\r\n        $scope.changeInputStyle = function () {\r\n            $scope.isCustomGenre ? $scope.isCustomGenre = false : $scope.isCustomGenre = true;\r\n            $scope.genreButtonText == 'Neues Genre anlegen' ? $scope.genreButtonText = 'Vorhandenes Genre auswählen' : $scope.genreButtonText = 'Neues Genre anlegen';\r\n        };\r\n\r\n        $scope.priceValidation = function () {\r\n            $scope.isPriceTouched = true;\r\n            !validatePrice($scope.price) ? $scope.isPriceInvalid = true : $scope.isPriceInvalid = false;\r\n        };\r\n\r\n        $scope.test = function () {\r\n            if ((!$scope.selected.genre && !$scope.isCustomGenre) || (!$scope.customGenre && $scope.isCustomGenre)) {\r\n                console.log('invalid');\r\n            }\r\n        };\r\n\r\n        $scope.imageToBase64 = function (input) {\r\n            if (input.files && input.files[0]) {\r\n                var reader = new FileReader();\r\n\r\n                reader.onload = function (e) {\r\n                    console.log('image successfully converted to Base64');\r\n                    $scope.image = e.target.result;\r\n                    $scope.$apply();\r\n                };\r\n\r\n                reader.readAsDataURL(input.files[0]);\r\n            }\r\n        };\r\n\r\n        $scope.addArticle = function () {\r\n            $scope.isTouched = true;\r\n            $scope.isPriceTouched = true;\r\n            $scope.isPriceInvalid = false;\r\n            if ($scope.title && (($scope.selected.genre && !$scope.isCustomGenre) || ($scope.customGenre && $scope.isCustomGenre))\r\n                && $scope.price && ($scope.selected.platform.wiiu ||\r\n                $scope.selected.platform.windows || $scope.selected.platform.ps || $scope.selected.platform.xbox ||\r\n                $scope.selected.platform.osx) && $scope.release && $scope.language && $scope.minRam &&\r\n                $scope.minProcessor && $scope.description && $scope.image) {\r\n                if (!validatePrice($scope.price)) {\r\n                    toastr.warning('Ungültiger Preis!');\r\n                    $scope.isPriceInvalid = true;\r\n                } else {\r\n                    var data = {\r\n                        id: 2,\r\n                        name : $scope.title,\r\n                        genre : $scope.isCustomGenre ? $scope.customGenre : $scope.selected.genre,\r\n                        price : $scope.price,\r\n                        fsk : $scope.selected.fsk,\r\n                        platforms : checkPlatforms(),\r\n                        release : $scope.release,\r\n                        language : $scope.language,\r\n                        minRam : $scope.minRam,\r\n                        minProcessor : $scope.minProcessor,\r\n                        description : $scope.description,\r\n                        image : $scope.image\r\n                    };\r\n                    console.log(data);\r\n                    articles.addArticle(data)\r\n                        .then(function (response) {\r\n\r\n                        }, function (error) {\r\n\r\n                        })\r\n                }\r\n            } else {\r\n                toastr.warning('Fehlende Informationen!');\r\n            }\r\n        }\r\n    }]);\n\r\nangular.module('app.gameDetail', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('gameDetail', {\r\n            url: '/gameDetail/:id',\r\n            templateUrl: 'app/gameDetail/gameDetail.html',\r\n            controller: 'GameDetailCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('GameDetailCtrl', [\"$scope\", \"$http\", \"$stateParams\", \"localStorageService\", \"$rootScope\", \"$uibModal\", \"$state\", function ($scope, $http, $stateParams, localStorageService, $rootScope, $uibModal, $state) {\r\n        // TODO check if game exists\r\n        $scope.tab = {};\r\n        $scope.tab.active = 'description';\r\n        $scope.quantity = 1;\r\n\r\n        var user = localStorageService.get('user') || {};\r\n        var userName = user.userName;\r\n\r\n        var calculateAverageStars = function (data) {\r\n            var count = 0;\r\n            var stars = 0;\r\n            angular.forEach(data, function (item) {\r\n                count++;\r\n                stars += item.stars;\r\n            });\r\n            return stars / count;\r\n        };\r\n\r\n        $scope.changeTab = function (type) {\r\n            $scope.tab.active = type;\r\n        };\r\n\r\n        var id = $stateParams.id;\r\n        $scope.articles = localStorageService.get('articles');\r\n        $scope.actualGame = $scope.articles[id];\r\n        if (!$scope.actualGame) {\r\n            toastr.warning('Das Spiel mit der ID ' + id + ' existiert nicht!');\r\n            $state.go('home');\r\n        }\r\n\r\n        $scope.stars = calculateAverageStars($scope.actualGame.reviews);\r\n        document.getElementById(\"description\").innerHTML = $scope.actualGame.description; \r\n\r\n        $scope.toCart = function () {\r\n            if ($scope.quantity >= 1) {\r\n                var cart = localStorageService.get('cart') || {};\r\n                if (cart[$scope.actualGame.id] && cart[$scope.actualGame.id].quantity) {\r\n                    cart[$scope.actualGame.id].quantity = parseInt(cart[$scope.actualGame.id].quantity) + parseInt($scope.quantity)\r\n                } else {\r\n                    cart[$scope.actualGame.id] = {\r\n                        itemId: $scope.actualGame.id,\r\n                        quantity: parseInt($scope.quantity)\r\n                    };\r\n                }\r\n                localStorageService.set('cart', cart);\r\n                $rootScope.$emit('itemAddedToCart');\r\n                toastr.success('Artikel erfolgreich ' + $scope.quantity + 'x in den Warenkorb gelegt!');\r\n                toastr.success('<img src=\"assets/img/giphy.gif\" ng-show=\"inCart\"/>');\r\n                $scope.quantity = 1;\r\n            } else {\r\n                toastr.warning('Bitte geben Sie eine gültige Zahl ein!')\r\n            }\r\n        };\r\n\r\n        $scope.starsActivator = {};\r\n        $scope.numbers = [1, 2, 3, 4, 5];\r\n        for (var i = 0; i <= 4; i++) {\r\n            $scope.starsActivator[$scope.numbers[i]] = false;\r\n        }\r\n\r\n        $scope.starHover = function (number) {\r\n            while (number > 0) {\r\n                $scope.starsActivator[number] = true;\r\n                number--;\r\n            }\r\n        };\r\n\r\n        $scope.leave = function () {\r\n            for (var i = 0; i <= 4; i++) {\r\n                $scope.starsActivator[$scope.numbers[i]] = false;\r\n            }\r\n        };\r\n\r\n        $scope.rate = function (stars) {\r\n            if (userName) {\r\n                var newReviewId = 1;\r\n                do {\r\n                    newReviewId++;\r\n                } while ($scope.actualGame.reviews[newReviewId]);\r\n                var title = '';\r\n                var message = '';\r\n                angular.forEach($scope.actualGame.reviews, function (review) {\r\n                    if (review.author == user) {\r\n                        title = review.title;\r\n                        message = review.message;\r\n                        newReviewId = review.id;\r\n                    }\r\n                });\r\n                var modalInstance = $uibModal.open({\r\n                    animation: true,\r\n                    templateUrl: 'app/gameDetail/rating/rating.html',\r\n                    controller: 'RatingCtrl',\r\n                    resolve: {\r\n                        stars: function () {\r\n                            return stars;\r\n                        },\r\n                        title: function () {\r\n                            return title;\r\n                        },\r\n                        message: function () {\r\n                            return message;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                modalInstance.result.then(function (result) {\r\n                    $scope.actualGame.reviews[newReviewId] = {\r\n                        id: newReviewId,\r\n                        stars: result.stars,\r\n                        title: result.title,\r\n                        message: result.message,\r\n                        author: userName\r\n                    };\r\n                    $scope.articles[id].reviews = $scope.actualGame.reviews;\r\n                    localStorageService.set('articles', $scope.articles);\r\n                    $scope.stars = calculateAverageStars($scope.actualGame.reviews);\r\n                    toastr.success('Bewertung hinzugefügt!');\r\n                }, function () {\r\n                    console.log('Modal dismissed');\r\n                });\r\n            } else {\r\n                toastr.warning('Bitte loggen Sie sich zuerst ein!');\r\n            }\r\n        };\r\n    }]);\n\r\nangular.module('app.genre', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('genre', {\r\n            url: '/genre/:name',\r\n            templateUrl: 'app/genre/genre.html',\r\n            controller: 'GenreCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('GenreCtrl', [\"$stateParams\", \"localStorageService\", \"$scope\", function ($stateParams, localStorageService, $scope) {\r\n        // TODO: order objects by id\r\n        $scope.searchInout = {};\r\n        $scope.genre = $stateParams.name;\r\n        var articles = localStorageService.get('articles');\r\n        $scope.articles = {};\r\n        $scope.isArticles = false;\r\n        if ($scope.genre != 'Alle Spiele') {\r\n            angular.forEach(articles, function (item) {\r\n                if (item.genre == $scope.genre) {\r\n                    $scope.isArticles = true;\r\n                    $scope.articles[item.id] = item;\r\n                }\r\n            });\r\n        } else {\r\n            $scope.isArticles = true;\r\n            $scope.articles = articles;\r\n        }\r\n    }]);\n\r\nangular.module('app.cart', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('cart', {\r\n            url: '/cart',\r\n            templateUrl: 'app/cart/cart.html',\r\n            controller: 'CartCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('CartCtrl', [\"localStorageService\", \"$scope\", \"$rootScope\", function (localStorageService, $scope, $rootScope) {\r\n        // cart only\r\n        var cart = localStorageService.get('cart');\r\n        // articles only\r\n        var articles = localStorageService.get('articles');\r\n        // cart and articles merged\r\n        $scope.cart = {};\r\n\r\n        $scope.updateTotalPrice = function () {\r\n            $scope.totalPrice = 0;\r\n            angular.forEach($scope.cart, function (item) {\r\n                $scope.totalPrice += item.quantity * item.price;\r\n            });\r\n        };\r\n\r\n        // merge cart and articles\r\n        angular.forEach(articles, function (article) {\r\n            angular.forEach(cart, function (item) {\r\n                if (item.itemId == article.id) {\r\n                    var newObject = article;\r\n                    newObject.quantity = item.quantity;\r\n                    console.log(newObject);\r\n                    $scope.cart[item.itemId] = newObject;\r\n                }\r\n            });\r\n        });\r\n        $scope.updateTotalPrice();\r\n\r\n        $scope.quantityChange = function (id) {\r\n            cart[id].quantity = parseInt($scope.cart[id].quantity);\r\n            $scope.updateTotalPrice();\r\n            localStorageService.set('cart', cart);\r\n            $rootScope.$emit('itemAddedToCart');\r\n        };\r\n\r\n        $scope.remove = function (id) {\r\n            delete $scope.cart[id];\r\n            delete cart[id];\r\n            $scope.updateTotalPrice();\r\n            localStorageService.set('cart', cart);\r\n            $rootScope.$emit('itemAddedToCart');\r\n        }\r\n    }]);\n\r\nangular.module('app.home', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('home', {\r\n            url: '/home',\r\n            templateUrl: 'app/home/home.html',\r\n            controller: 'HomeCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('HomeCtrl', function () {\r\n\r\n    });\n\r\nangular.module('app.orders', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('orders', {\r\n            url: '/orders',\r\n            templateUrl: 'app/orders/orders.html',\r\n            controller: 'OrdersCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('OrdersCtrl', [\"$scope\", \"$http\", \"localStorageService\", function ($scope, $http, localStorageService) {\r\n        var date = new Date();\r\n        console.log(date);\r\n        $http.get('../assets/json/orders.json')\r\n            .then(function (response) {\r\n                localStorageService.set('orders', response.data);\r\n                $scope.orders = response.data;\r\n                console.log($scope.orders);\r\n            }, function (error) {\r\n                var data = localStorageService.get('orders');\r\n                if (data) {\r\n                    toastr.warning('Bestellungen konnten nicht geladen werden! Daten sind möglicherweise veraltet.');\r\n                    $scope.orders = data;\r\n                } else {\r\n                    toastr.error('Bestellungen konnten nicht geladen werden! Bitte verbinden Sie sich mit dem Internet.');\r\n                }\r\n                console.log(error);\r\n            });\r\n    }]);\n\r\nangular.module('app.login', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('login', {\r\n            url: '/login',\r\n            templateUrl: 'app/login/login.html',\r\n            controller: 'LoginCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('LoginCtrl', [\"$scope\", \"$state\", \"localStorageService\", \"$rootScope\", \"$http\", \"$log\", function ($scope, $state, localStorageService, $rootScope, $http, $log) {\r\n        $scope.isFormTouched = false;\r\n        var user = localStorageService.get('user') || {};\r\n        var toCheckout = localStorageService.get('fromCheckout');\r\n        if (user.userName) {\r\n            toastr.info('Sie sind bereits eingeloogt als \"' + user.userName + '\"!');\r\n            $state.go('home');\r\n        }\r\n        $scope.data = {};\r\n        $scope.data.password = '';\r\n        $scope.data.userName = '';\r\n\r\n        //Trigger Login when enter pressed\r\n        $(\"#username\").keydown(function (event) {\r\n            if (event.keyCode == 13) {\r\n                $(\"#submit\").click();\r\n            }\r\n        });\r\n        $(\"#password\").keydown(function (event) {\r\n            if (event.keyCode == 13) {\r\n                $(\"#submit\").click();\r\n            }\r\n        });\r\n\r\n        $scope.login = function () {\r\n            $scope.isFormTouched = true;\r\n            if (!$scope.data.userName || !$scope.data.password) {\r\n                toastr.warning('<img src=\"assets/img/Epic_Mass_Facepalm.gif\"/>');\r\n                toastr.warning('You had one Job!');\r\n            } else {\r\n                toastr.success('Login war erfolgreich.');\r\n                var role = 'admin';\r\n                var user = {\r\n                    userName: $scope.data.userName,\r\n                    role: role\r\n                };\r\n                localStorageService.set('user', user);\r\n                $rootScope.$emit('login');\r\n                localStorageService.remove('checkout');\r\n                if (toCheckout) {\r\n                    $state.go('checkout');\r\n                } else {\r\n                    $state.go('home');\r\n                }\r\n                // $http.get('http://localhost:8080/rest/user/' + $scope.data.userName)\r\n                //     .then(function (response) {\r\n                //         if (response.data.password === $scope.data.password) {\r\n                //             toastr.success('Login war erfolgreich.');\r\n                //             var role = response.Rolle;\r\n                //             var user = {\r\n                //                 userName: $scope.data.userName,\r\n                //                 role: role\r\n                //             };\r\n                //             localStorageService.set('user', user);\r\n                //             $rootScope.$emit('login');\r\n                //             localStorageService.remove('checkout');\r\n                //             if (toCheckout) {\r\n                //                 $state.go('checkout');\r\n                //             } else {\r\n                //                 $state.go('home');\r\n                //             }\r\n                //         } else {\r\n                //             toastr.warning('Benutzername und Passwort stimmen nicht überein!');\r\n                //         }\r\n                //     }, function (error) {\r\n                //         $log.error(error);\r\n                //         toastr.error('Fehler bei der Verbindung! Status ' + error.status);\r\n                //     });\r\n            }\r\n        }\r\n    }]);\n\r\nangular.module('app.newGames', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('newGames', {\r\n            url: '/newGames',\r\n            templateUrl: 'app/newGames/newGames.html',\r\n            controller: 'NewGamesCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('NewGamesCtrl', function () {\r\n\r\n    });\n\r\nangular.module('app')\r\n    .factory('articles', [\"$q\", \"$http\", \"localStorageService\", function ($q, $http, localStorageService) {\r\n        var service = {};\r\n\r\n        service.getAllArticles = function () {\r\n            var q = $q.defer();\r\n            $http.get('http://localhost:8080/rest/article/all')\r\n                .then(function (response) {\r\n                    //Mapping\r\n                    var mapped = _mapArticles(response.data);\r\n                    localStorageService.set('articles', mapped);\r\n                    q.resolve(mapped);\r\n                }, function (error) {\r\n                    q.reject(error);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.getAllGenres = function () {\r\n            var q = $q.defer();\r\n            var genres = localStorageService.get('genres') || [];\r\n            if (!genres) {\r\n                this.getAllArticles()\r\n                    .then(function () {\r\n                        genres = localStorageService.get('genres') || [];\r\n                        q.resolve(genres);\r\n                    }, function (error) {\r\n                        q.reject(error);\r\n                    })\r\n            } else {\r\n                q.resolve(genres);\r\n            }\r\n            return q.promise;\r\n        };\r\n\r\n        service.addArticle = function (input) {\r\n            var q = $q.defer();\r\n            var data = {\r\n                ID: input.id.toString(),\r\n                Name: input.name,\r\n                Genre: input.genre,\r\n                Preis: input.price,\r\n                FSK: input.fsk,\r\n                Plattformen: input.platforms,\r\n                Release: input.release,\r\n                Sprache: input.language,\r\n                minRam: parseInt(input.minRam),\r\n                minProcessor: parseFloat(input.minProcessor),\r\n                Beschreibung: input.description,\r\n                image: input.image,\r\n                Rezensionen: []\r\n            };\r\n            console.log(data);\r\n            $http.post('http://localhost:8080/rest/article', data)\r\n                .then(function (response) {\r\n                    console.log(response);\r\n                    q.resolve(response);\r\n                }, function (error) {\r\n                    console.log(error);\r\n                    q.reject(error);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        var _mapArticles = function (articles) {\r\n            var mappedItems = {};\r\n            var genres = [];\r\n\r\n            angular.forEach(articles, function (item) {\r\n                // Genres\r\n                var isNewGenre = true;\r\n                angular.forEach(genres, function (genre) {\r\n                    if (item.genre == genre) {\r\n                        isNewGenre = false;\r\n                    }\r\n                });\r\n\r\n                var mappedItem = {\r\n                    id: parseInt(item.ID),\r\n                    name: item.Name,\r\n                    genre: item.Genre,\r\n                    price: parseFloat(item.Preis),\r\n                    fsk: parseInt(item.FSK),\r\n                    platforms: trimPlatforms(item.Plattformen),\r\n                    release: item.Release,\r\n                    language: item.Sprache,\r\n                    minRam: item.minRam,\r\n                    minProcessor: item.minProcessor,\r\n                    image: item.image,\r\n                    description: item.Beschreibung,\r\n                    reviews: _mapReviews(item.Rezensionen)\r\n                };\r\n                if (isNewGenre) {\r\n                    genres.push(mappedItem.genre);\r\n                }\r\n                mappedItems[mappedItem.id] = mappedItem;\r\n                console.log(mappedItem);\r\n            });\r\n            localStorageService.set('genres', genres);\r\n            return mappedItems;\r\n        };\r\n\r\n        function trimPlatforms(input) {\r\n            var trimmed = [];\r\n            angular.forEach(input, function (item) {\r\n                trimmed.push(item.trim());\r\n            });\r\n            return trimmed;\r\n        }\r\n\r\n        var _mapReviews = function (reviews) {\r\n            var mappedItems = {};\r\n            angular.forEach(reviews, function (item) {\r\n                var mappedItem = {\r\n                    id: item.id,\r\n                    stars: item.stars,\r\n                    author: item.author,\r\n                    title: item.title,\r\n                    message: item.message\r\n                };\r\n                mappedItems[mappedItem.id] = mappedItem;\r\n            });\r\n            return mappedItems;\r\n        };\r\n        return service;\r\n    }]);\n\r\nangular.module('app.topGames', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('topGames', {\r\n            url: '/topGames',\r\n            templateUrl: 'app/topGames/topGames.html',\r\n            controller: 'TopGamesCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('TopGamesCtrl', function () {\r\n\r\n    });\n\r\nangular.module('app.userAdministration', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('userAdministration', {\r\n            url: '/userAdministration',\r\n            templateUrl: 'app/userAdministration/userAdministration.html',\r\n            controller: 'UserAdministrationCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('UserAdministrationCtrl', function () {\r\n\r\n    });\n\r\nangular.module('app.gameDetail')\r\n    .controller('RatingCtrl', [\"$scope\", \"$uibModalInstance\", \"stars\", \"title\", \"message\", function ($scope, $uibModalInstance, stars, title, message) {\r\n        \r\n        $scope.stars = stars;\r\n        $scope.message = message;\r\n        $scope.title = title;\r\n\r\n        $scope.checkValid = function () {\r\n            $scope.message && $scope.title ? $scope.isValid = true : $scope.isValid = false;\r\n        };\r\n        $scope.checkValid();\r\n\r\n        $scope.submit = function () {\r\n            var result = {\r\n                title: $scope.title,\r\n                message: $scope.message,\r\n                stars: $scope.stars\r\n            };\r\n            $uibModalInstance.close(result);\r\n        };\r\n        $scope.cancel = function () {\r\n            $uibModalInstance.dismiss();\r\n        };\r\n    }]);\n\r\nangular.module('app.checkout', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('checkout', {\r\n            url: '/checkout',\r\n            templateUrl: 'app/cart/checkout/checkout.html',\r\n            controller: 'CheckoutCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('CheckoutCtrl', [\"$scope\", \"localStorageService\", \"$state\", function ($scope, localStorageService, $state) {\r\n        var user = localStorageService.get('user') || {};\r\n        if (!user.userName) {\r\n            localStorageService.set('fromCheckout', true);\r\n            toastr.info('Bitte melden Sie sich an.');\r\n            $state.go('login');\r\n        }\r\n        var cart = localStorageService.get('cart') || {};\r\n        var articles = localStorageService.get('articles') || {};\r\n        $scope.cart = {};\r\n\r\n        $scope.updateTotalPrice = function () {\r\n            $scope.totalPrice = 0;\r\n            angular.forEach($scope.cart, function (item) {\r\n                $scope.totalPrice += item.quantity * item.price;\r\n            });\r\n        };\r\n\r\n        angular.forEach(articles, function (article) {\r\n            angular.forEach(cart, function (item) {\r\n                if (item.itemId == article.id) {\r\n                    var newObject = article;\r\n                    newObject.quantity = item.quantity;\r\n                    $scope.cart[item.itemId] = newObject;\r\n                }\r\n            });\r\n        });\r\n        $scope.updateTotalPrice();\r\n\r\n    }]);\n\r\nangular.module('app.passwordForget', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('passwordForget', {\r\n            url: '/passwordForget',\r\n            templateUrl: 'app/login/passwordForget/passwordForget.html',\r\n            controller: 'PasswordForgetCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('PasswordForgetCtrl', [\"$scope\", function ($scope) {\r\n        $scope.data = {};\r\n        $scope.data.email = '';\r\n        $scope.submit = function () {\r\n            if (!$scope.email) {\r\n                toastr.warning('Ungültige Email-Adresse!');\r\n            } else {\r\n                toastr.success('Gültige Eingabe.');\r\n            }\r\n        }\r\n    }]);\n\r\nangular.module('app.register', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('register', {\r\n            url: '/register',\r\n            templateUrl: 'app/login/register/register.html',\r\n            controller: 'RegisterCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('RegisterCtrl', [\"$scope\", \"$http\", \"$log\", function ($scope, $http, $log) {\r\n        $scope.data = {};\r\n        $scope.data.userName = '';\r\n        $scope.data.email = '';\r\n        $scope.data.password = '';\r\n        $scope.data.passwordConfirm = '';\r\n\r\n        $scope.register = function () {\r\n            if (!$scope.data.userName || !$scope.data.password || !$scope.data.passwordConfirm) {\r\n                toastr.warning('Alle Felder müssen ausgefüllt werden!', 'Fehlende Informationen!')\r\n            } else if (!$scope.data.email) {\r\n                toastr.warning('Die Email-Adresse ist ungültig!', 'Fehlerhafte Informationen!')\r\n            } else if ($scope.data.password != $scope.data.passwordConfirm) {\r\n                toastr.warning('Die Passwörter stimmen nicht überein.', 'Fehlerhafte Informationen!')\r\n            } else {\r\n                var user = {\r\n                    id: '0000',\r\n                    username: $scope.data.userName,\r\n                    password: $scope.data.password,\r\n                    email: $scope.data.email,\r\n                    role: 'user'\r\n                };\r\n                // $http.post('http://localhost:8080/rest/user/' + JSON.stringify(user)+'');\r\n            }\r\n        }\r\n    }]);\n\n})(window, document);\n"],"sourceRoot":"/source/"}