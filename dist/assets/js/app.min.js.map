{"version":3,"sources":["app.js"],"names":["window","document","undefined","angular","module","config","$urlRouterProvider","localStorageServiceProvider","otherwise","setPrefix","toastr","options","closeButton","debug","newestOnTop","progressBar","positionClass","preventDuplicates","onclick","showDuration","hideDuration","timeOut","extendedTimeOut","showEasing","hideEasing","showMethod","hideMethod","run","localStorageService","articles","$rootScope","$log","getAllArticles","then","response","$emit","set","error","data","get","controller","$scope","$http","$state","remove","$on","event","toState","toParams","currentStateName","name","currentStateParams","countCartItems","getUserData","genres","logout","success","go","user","userName","userRole","role","cart","quantity","forEach","item","itemId","filter","items","search","result","toLowerCase","value","key","indexOf","push","$stateProvider","state","url","templateUrl","$stateParams","$uibModal","loadGame","id","actualGame","stars","calculateAverageStars","reviews","getElementById","innerHTML","description","calcPrice","warning","count","reviewsCount","tab","active","isValidQuantity","price","isNaN","Math","round","current","changeTab","type","toCart","parseInt","starsActivator","numbers","i","starHover","number","leave","rate","newReviewId","title","message","review","author","modalInstance","open","animation","resolve","articleId","addReview","console","log","isInvalid","updateTotalPrice","totalPrice","isInt","n","Number","quantityChange","newQuantity","checkPlatforms","selected","platform","bool","validatePrice","input","test","currentUser","equals","info","authenticate","password","fsk","isTouched","isPriceInvalid","isPriceTouched","isCustomGenre","genreButtonText","changeInputStyle","priceValidation","imageToBase64","files","reader","FileReader","onload","e","image","target","$apply","readAsDataURL","isFloat","parseFloat","addArticle","genre","customGenre","wiiu","windows","ps","xbox","osx","release","language","minRam","minProcessor","date","Date","getTime","platforms","toString","searchInput","isAllGenres","isArticles","isFormTouched","username","toCheckout","$","keydown","keyCode","click","login","newGameIds","orders","getOrders","topGameIds","getTopGames","loadUsers","getAllUsers","users","deleteUser","factory","$q","$filter","trimPlatforms","trimmed","trim","service","q","defer","reject","mapped","_mapArticles","getNewGames","statusText","promise","ID","Name","Genre","Preis","FSK","Plattformen","Release","Sprache","Beschreibung","Rezensionen","post","idArticle","Autor","Titel","Text","Datum","top","articlesArray","sorted","sliced","slice","newGamesIds","mappedItems","isNewGenre","mappedItem","_mapReviews","exports","md5","cache","text","defaultText","createHash","str","xl","k","AA","BB","CC","DD","a","b","c","d","rotateLeft","lValue","iShiftBits","addUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","_F","x","y","z","_G","_H","_I","_FF","s","ac","_GG","_HH","_II","convertToWordArray","lWordCount","lMessageLength","length","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","Array","lBytePosition","lByteCount","charCodeAt","wordToHex","lByte","lCount","wordToHexValue","wordToHexValue_temp","substr","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","temp","_mapOrders","order","mappedOrder","userId","idUser","Bestellungsartikel","Anzahl","mapCartItems","idOrder","addOrder","_mapUsers","Benutzername","email","Email","Rolle","addUser","Passwort","warn","md5Password","$uibModalInstance","isNewReview","checkValid","isValid","submit","close","cancel","dismiss","passwordConfirm","pattern","register"],"mappings":"CAAA,SAAUA,EAAQC,EAAUC,GAC5B,YACAC,SAAQC,OAAO,OACX,YACA,eACA,qBACA,YACA,YACA,cACA,cAEA,WACA,iBACA,eACA,eACA,iBACA,YACA,YACA,WACA,eACA,aACA,yBACA,iBAECC,QAAQ,qBAAsB,8BAA+B,SAAUC,EAAoBC,GACxFD,EAAmBE,UAAU,SAC7BD,EAA4BE,UAAU,WACtCC,OAAOC,SACHC,aAAe,EACfC,OAAS,EACTC,aAAe,EACfC,aAAe,EACfC,cAAiB,qBACjBC,mBAAqB,EACrBC,QAAW,KACXC,aAAgB,MAChBC,aAAgB,OAChBC,QAAW,OACXC,gBAAmB,OACnBC,WAAc,QACdC,WAAc,SACdC,WAAc,SACdC,WAAc,cAGrBC,KAAK,sBAAuB,WAAY,aAAc,OAAQ,SAAUC,EAAqBC,EAAUC,EAAYC,GAChHF,EAASG,iBACJC,KAAK,SAAUC,GACZJ,EAAWK,MAAM,gBACjBP,EAAoBQ,IAAI,WAAYF,IACrC,SAAUG,GACT,GAAIC,GAAOV,EAAoBW,IAAI,WAC/BD,GACA5B,OAAO2B,MAAM,iFAEb3B,OAAO2B,MAAM,yCAEjBN,EAAKM,MAAMA,KAEnBT,EAAoBQ,IAAI,gBAAgB,MAG3CI,WAAW,WAAY,SAAU,aAAc,QAAS,sBAAuB,SAAU,WAAY,SAAUC,EAAQX,EAAYY,EAAOd,EAAqBe,EAAQd,GACpKD,EAAoBgB,OAAO,YAC3Bd,EAAWe,IAAI,sBACX,SAAUC,EAAOC,EAASC,GACtBP,EAAOQ,iBAAmBF,EAAQG,KAClCT,EAAOU,mBAAqBH,EAASE,OAG7CpB,EAAWe,IAAI,kBAAmB,WAC9BO,MAGJtB,EAAWe,IAAI,QAAS,WACpBQ,MAIJZ,EAAOa,OAAS1B,EAAoBW,IAAI,UACxCT,EAAWe,IAAI,kBAAmB,WAC9BJ,EAAOa,OAAS1B,EAAoBW,IAAI,YAG5CT,EAAWyB,OAAS,WAChB3B,EAAoBgB,OAAO,QAC3BhB,EAAoBgB,OAAO,UAC3BhB,EAAoBgB,OAAO,YAE3Bd,EAAWK,MAAM,SACjBL,EAAWK,MAAM,mBACjBzB,OAAO8C,QAAQ,2BACfb,EAAOc,GAAG,SAId,IAAIJ,GAAc,WACd,GAAIK,GAAO9B,EAAoBW,IAAI,WACnCE,GAAOkB,SAAWD,EAAKC,UAAY,WACnClB,EAAOmB,SAAWF,EAAKG,KAE3BR,IAGA,IAAID,GAAiB,WACjB,GAAIU,GAAOlC,EAAoBW,IAAI,OACnCE,GAAOsB,SAAW,CAClB,IAAIlC,GAAWD,EAAoBW,IAAI,eACvCpC,SAAQ6D,QAAQF,EAAM,SAAUG,GACxBpC,EAASoC,EAAKC,QACdzB,EAAOsB,UAAYE,EAAKF,eAGjBD,GAAKG,EAAKC,UAGzBtC,EAAoBQ,IAAI,OAAQ0B,GAEpCV,QAEHe,OAAO,eAAgB,WACpB,MAAO,UAAUC,EAAOC,GACpB,GAAIC,KAOJ,OANAD,GAASA,EAASA,EAAOE,cAAgB,GACzCpE,QAAQ6D,QAAQI,EAAO,SAAUI,EAAOC,GACa,KAA7CD,EAAMtB,KAAKqB,cAAcG,QAAQL,IACjCC,EAAOK,KAAKH,KAGbF,KAKnBnE,QAAQC,OAAO,qBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,cACjBC,IAAM,kBACNC,YAAc,iCACdvC,WAAa,sBAIpBA,WAAW,kBAAmB,SAAU,QAAS,eAAgB,sBAAuB,YAAa,SAAU,WAAY,aAAc,SAAUC,EAAQC,EAAOsC,EAAcpD,EAAqBqD,EAAWtC,EAAQd,EAAUC,GAsB/N,QAASoD,KAEL,GAAIC,GAAKH,EAAaG,EACtB1C,GAAOZ,SAAWD,EAAoBW,IAAI,YAC1CE,EAAO2C,WAAa3C,EAAOZ,SAASsD,GAC/B1C,EAAO2C,YAIR3C,EAAO4C,MAAQC,EAAsB7C,EAAO2C,WAAWG,SACvDtF,EAASuF,eAAe,eAAeC,UAAYhD,EAAO2C,WAAWM,YACrEjD,EAAOkD,cALPjF,OAAOkF,QAAQ,wBAA0BT,EAAK,qBAC9CxC,EAAOc,GAAG,SAmBlB,QAAS6B,GAAsBhD,GAC3B,GAAIuD,GAAQ,EACRR,EAAQ,CAMZ,OALAlF,SAAQ6D,QAAQ1B,EAAM,SAAU2B,GAC5B4B,IACAR,GAASpB,EAAKoB,QAElB5C,EAAOqD,aAAeD,EACR,IAAVA,EACO,EAEAR,EAAQQ,EA1DvBpD,EAAOsD,OACPtD,EAAOsD,IAAIC,OAAS,cAEpBvD,EAAOsB,SAAW,EAElBtB,EAAOwD,iBAAkB,EACzBxD,EAAOkD,UAAY,WACf,GAAIO,GAAQzD,EAAO2C,WAAWc,MAAQzD,EAAOsB,QACzCoC,OAAMD,IAAUzD,EAAOsB,SAAW,GAAKtB,EAAOsB,SAAW,IAEzDtB,EAAOyD,MAAQ,6CACfzD,EAAOwD,iBAAkB,IAEzBxD,EAAOyD,MAAQE,KAAKC,MAAc,IAARH,GAAe,IACzCzD,EAAOwD,iBAAkB,IAKjCf,IAiBApD,EAAWe,IAAI,kBAAmB,WAGH,cAAvBF,EAAO2D,QAAQpD,MACfgC,KAIR,IAAIxB,GAAO9B,EAAoBW,IAAI,YAC/BoB,EAAWD,EAAKC,QAiBpBlB,GAAO8D,UAAY,SAAUC,GACzB/D,EAAOsD,IAAIC,OAASQ,GAGxB/D,EAAOgE,OAAS,WACZ,GAAIhE,EAAOsB,UAAY,EAAG,CACtB,GAAID,GAAOlC,EAAoBW,IAAI,WAE/BuB,GAAKrB,EAAO2C,WAAWD,KAAOrB,EAAKrB,EAAO2C,WAAWD,IAAIpB,SACzDD,EAAKrB,EAAO2C,WAAWD,IAAIpB,SAAW2C,SAAS5C,EAAKrB,EAAO2C,WAAWD,IAAIpB,UAAY2C,SAASjE,EAAOsB,UAEtGD,EAAKrB,EAAO2C,WAAWD,KACnBjB,OAASzB,EAAO2C,WAAWD,GAC3BpB,SAAW2C,SAASjE,EAAOsB,WAGnCnC,EAAoBQ,IAAI,OAAQ0B,GAChChC,EAAWK,MAAM,mBACjBzB,OAAO8C,QAAQ,sDACf9C,OAAO8C,QAAQ,uBAAyBf,EAAOsB,SAAW,kCAE1DrD,QAAOkF,QAAQ,2CAKvBnD,EAAOkE,kBACPlE,EAAOmE,SAAW,EAAG,EAAG,EAAG,EAAG,EAC9B,KAAK,GAAIC,GAAI,EAAQ,GAALA,EAAQA,IACpBpE,EAAOkE,eAAelE,EAAOmE,QAAQC,KAAM,CAE/CpE,GAAOqE,UAAY,SAAUC,GACzB,KAAOA,EAAS,GACZtE,EAAOkE,eAAeI,IAAU,EAChCA,KAGRtE,EAAOuE,MAAQ,WACX,IAAK,GAAIH,GAAI,EAAQ,GAALA,EAAQA,IACpBpE,EAAOkE,eAAelE,EAAOmE,QAAQC,KAAM,GAGnDpE,EAAOwE,KAAO,SAAU5B,GACpB,GAAI1B,EAAU,CACV,GAAIuD,GAAc,CAClB,GACIA,WACKzE,EAAO2C,WAAWG,QAAQ2B,GACnC,IAAIC,GAAQ,GACRC,EAAU,EACdjH,SAAQ6D,QAAQvB,EAAO2C,WAAWG,QAAS,SAAU8B,GAC7CA,EAAOC,QAAU5D,EAAKC,WACtBwD,EAAQE,EAAOF,MACfC,EAAUC,EAAOD,QACjBF,EAAcG,EAAOlC,KAI7B,IAAIoC,GAAgBtC,EAAUuC,MAC1BC,WAAY,EACZ1C,YAAc,oCACdvC,WAAa,aAEbkF,SACIrC,MAAQ,WACJ,MAAOA,IAEX8B,MAAQ,WACJ,MAAOA,IAEXC,QAAU,WACN,MAAOA,MAKnBG,GAAcjD,OAAOrC,KAAK,SAAUqC,GAEhC,GAAIhC,IACA6C,GAAK,EACLE,MAAQf,EAAOe,MACf8B,MAAQ7C,EAAO6C,MACfC,QAAU9C,EAAO8C,QACjBE,OAAS3D,EACTgE,UAAYlF,EAAO2C,WAAWD,GAElCtD,GAAS+F,UAAUtF,GACdL,KAAK,WACFvB,OAAO8C,QAAQ,2BAChB,SAAUnB,GACT3B,OAAO2B,MAAM,sCACTA,EACA3B,OAAO2B,MAAMA,GAEb3B,OAAO2B,MAAM,8CAG1B,WAECwF,QAAQC,IAAI,yBAGhBpH,QAAOkF,QAAQ,yCAK/BzF,QAAQC,OAAO,eAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,QACjBC,IAAK,QACLC,YAAa,qBACbvC,WAAY,gBAInBA,WAAW,YAAa,sBAAuB,SAAU,aAAc,SAAUZ,EAAqBa,EAAQX,GAC3GW,EAAOqB,KAAOlC,EAAoBW,IAAI,QACtCE,EAAOZ,SAAWD,EAAoBW,IAAI,YAC1CE,EAAOsF,WAAY,EAEnBtF,EAAOuF,iBAAmB,WACtBvF,EAAOwF,WAAa,EACpB9H,QAAQ6D,QAAQvB,EAAOqB,KAAM,SAAUG,GACnCxB,EAAOwF,YAAchE,EAAKF,SAAWtB,EAAOZ,SAASoC,EAAKC,QAAQgC,SAG1EzD,EAAOuF,mBAEPvF,EAAOyF,MAAQ,SAAUC,GAErB,MADAA,GAAIzB,SAASyB,GACNC,OAAOD,KAAOA,GAAKA,EAAI,IAAM,GAGxC1F,EAAO4F,eAAiB,SAAUlD,GAC9B,GAAImD,GAAc5B,SAASjE,EAAOqB,KAAKqB,GAAIpB,SACzB,GAAduE,GAAmBA,EAAc,KAAO7F,EAAOyF,MAAMI,GACrD7F,EAAOsF,WAAY,GAEnBtF,EAAOsF,WAAY,EACnBtF,EAAOqB,KAAKqB,GAAIpB,SAAWuE,EAC3B7F,EAAOuF,mBACPpG,EAAoBQ,IAAI,OAAQK,EAAOqB,MACvChC,EAAWK,MAAM,qBAIzBM,EAAOG,OAAS,SAAUuC,SACf1C,GAAOqB,KAAKqB,GACnB1C,EAAOuF,mBACPpG,EAAoBQ,IAAI,OAAQK,EAAOqB,MACvChC,EAAWK,MAAM,uBAI7BhC,QAAQC,OAAO,qBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,cACjBC,IAAM,cACNC,YAAc,iCACdvC,WAAa,sBAIpBA,WAAW,kBAAmB,SAAU,WAAY,OAAQ,SAAU,sBAAuB,OAAQ,aAAc,SAAUC,EAAQZ,EAAUE,EAAMY,EAAQf,EAAqB8B,EAAM5B,GA8BrL,QAASyG,KACL,GAAIC,KAMJ,OALArI,SAAQ6D,QAAQvB,EAAO+F,SAASC,SAAU,SAAUC,EAAMjE,GAClDiE,GACAF,EAAS7D,KAAKF,KAGf+D,EAWX,QAASG,GAAcC,GACnB,MAAO,mEAAmEC,KAAKD,GAhDnF,GAAIE,GAAclH,EAAoBW,IAAI,WACtCpC,SAAQ4I,UAAWD,IACnBpI,OAAOsI,KAAK,sDACZrG,EAAOc,GAAG,UAEVC,EAAKuF,aAAaH,EAAYnF,SAAUmF,EAAYI,UAC/CjH,KAAK,SAAUC,GACZN,EAAoBQ,IAAI,OAAQF,GAChC4G,EAAc5G,EACU,SAApB4G,EAAYjF,OACZnD,OAAOsI,KAAK,8BACZrG,EAAOc,GAAG,UAEf,WACC/C,OAAO2B,MAAM,oCACb3B,OAAOkF,QAAQ,yCACf9D,EAAWyB,WAGvBd,EAAO+F,YACP/F,EAAO+F,SAASC,YAChBhG,EAAO+F,SAASW,IAAM,IACtB1G,EAAO2G,WAAY,EACnB3G,EAAO4G,gBAAiB,EACxB5G,EAAO6G,gBAAiB,EACxB7G,EAAO8G,eAAgB,EACvB9G,EAAO+G,gBAAkB,sBAazB/G,EAAOa,OAAS1B,EAAoBW,IAAI,cACxCV,EAASG,iBACJC,KAAK,WACFQ,EAAOa,OAAS1B,EAAoBW,IAAI,eACzC,SAAUF,GACT3B,OAAO2B,MAAMA,KAQrBI,EAAOgH,iBAAmB,WACtBhH,EAAO8G,cAAgB9G,EAAO8G,eAAgB,EAAQ9G,EAAO8G,eAAgB,EACnD,uBAA1B9G,EAAO+G,gBAA2C/G,EAAO+G,gBAAkB,8BAAgC/G,EAAO+G,gBAAkB,uBAGxI/G,EAAOiH,gBAAkB,WACrBjH,EAAO6G,gBAAiB,EACvBX,EAAclG,EAAOyD,OAAwCzD,EAAO4G,gBAAiB,EAAvD5G,EAAO4G,gBAAiB,GAG3D5G,EAAOkH,cAAgB,SAAUf,GAC7B,GAAIA,EAAMgB,OAAShB,EAAMgB,MAAM,GAAI,CAC/B,GAAIC,GAAS,GAAIC,WAEjBD,GAAOE,OAAS,SAAUC,GACtBnC,QAAQC,IAAI,0CACZrF,EAAOwH,MAAQD,EAAEE,OAAO5F,OACxB7B,EAAO0H,UAGXN,EAAOO,cAAcxB,EAAMgB,MAAM,MAIzCnH,EAAOyF,MAAQ,SAAUC,GAErB,MADAA,GAAIzB,SAASyB,GACNC,OAAOD,KAAOA,GAAKA,EAAI,IAAM,GAGxC1F,EAAO4H,QAAU,SAAUlC,GAEvB,MADAA,GAAImC,WAAWnC,GACRC,OAAOD,KAAOA,GAAKA,EAAI,IAAM,GAGxC1F,EAAO8H,WAAa,WAIhB,GAHA9H,EAAO2G,WAAY,EACnB3G,EAAO6G,gBAAiB,EACxB7G,EAAO4G,gBAAiB,EACpB5G,EAAO0E,QAAW1E,EAAO+F,SAASgC,QAAU/H,EAAO8G,eAAmB9G,EAAOgI,aAAehI,EAAO8G,gBAChG9G,EAAOyD,QAAUzD,EAAO+F,SAASC,SAASiC,MAC7CjI,EAAO+F,SAASC,SAASkC,SAAWlI,EAAO+F,SAASC,SAASmC,IAAMnI,EAAO+F,SAASC,SAASoC,MAC5FpI,EAAO+F,SAASC,SAASqC,MAAQrI,EAAOsI,SAAWtI,EAAOuI,UAAYvI,EAAOwI,QAC7ExI,EAAOyI,cAAgBzI,EAAOiD,aAAejD,EAAOwH,MACpD,GAAKtB,EAAclG,EAAOyD,OAGnB,GAAKzD,EAAOyF,MAAMzF,EAAOwI,QAEzB,GAAKxI,EAAO4H,QAAQ5H,EAAOyI,eAAkBzI,EAAOyF,MAAMzF,EAAOyI,cAEjE,CACH,GAAIC,GAAO,GAAIC,MAAK3I,EAAOsI,SAASM,UAChC/I,GACA6C,GAAK,EACLjC,KAAOT,EAAO0E,MACdqD,MAAQ/H,EAAO8G,cAAgB9G,EAAOgI,YAAchI,EAAO+F,SAASgC,MACpEtE,MAAQzD,EAAOyD,MACfiD,IAAM1G,EAAO+F,SAASW,IACtBmC,UAAY/C,IACZwC,QAAUI,EAAKI,WACfP,SAAWvI,EAAOuI,SAClBC,OAASxI,EAAOwI,OAChBC,aAAezI,EAAOyI,aACtBxF,YAAcjD,EAAOiD,YACrBuE,MAAQxH,EAAOwH,MAEnBpC,SAAQC,IAAIxF,GACZT,EAAS0I,WAAWjI,GACfL,KAAK,SAAUC,GACZxB,OAAO8C,QAAQtB,GACfS,EAAOc,GAAG,SACX,SAAUpB,GACJA,EAGD3B,OAAO2B,MAAMA,GAFb3B,OAAO2B,MAAM,iDAxBzB3B,QAAOkF,QAAQ,qGAFflF,QAAOkF,QAAQ,6EAHflF,QAAOkF,QAAQ,qBACfnD,EAAO4G,gBAAiB,MAmC5B3I,QAAOkF,QAAQ,+BAK/BzF,QAAQC,OAAO,gBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,SACjBC,IAAK,eACLC,YAAa,uBACbvC,WAAY,iBAInBA,WAAW,aAAc,eAAgB,sBAAuB,SAAU,SAAUwC,EAAcpD,EAAqBa,GACpHA,EAAO+I,YAAc,GACrB/I,EAAOgJ,aAAc,EAGrBhJ,EAAO+H,MAAQxF,EAAa9B,IAG5B,IAAIrB,GAAWD,EAAoBW,IAAI,WAGvCE,GAAOZ,YAEPY,EAAOiJ,YAAa,EACA,eAAhBjJ,EAAO+H,MACPrK,QAAQ6D,QAAQnC,EAAU,SAAUoC,GAC5BA,EAAKuG,OAAS/H,EAAO+H,QACrB/H,EAAOiJ,YAAa,EACpBjJ,EAAOZ,SAASoC,EAAKkB,IAAMlB,MAInCxB,EAAOiJ,YAAa,EACpBjJ,EAAOgJ,aAAc,EACrBhJ,EAAOZ,SAAWA,MAI9B1B,QAAQC,OAAO,gBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,SACjBC,IAAK,SACLC,YAAa,uBACbvC,WAAY,iBAInBA,WAAW,aAAc,SAAU,SAAU,sBAAuB,aAAc,QAAS,OAAQ,SAAUC,EAAQE,EAAQf,EAAqBE,EAAYY,EAAOgB,GAClKjB,EAAOkJ,eAAgB,CACvB,IAAIC,GAAWhK,EAAoBW,IAAI,YACnCsJ,EAAajK,EAAoBW,IAAI,eACrCqJ,GAASjI,WACTjD,OAAOsI,KAAK,oCAAsC4C,EAASjI,SAAW,MACtEhB,EAAOc,GAAG,SAEdhB,EAAOH,QACPG,EAAOH,KAAK4G,SAAW,GACvBzG,EAAOH,KAAKqB,SAAW,GAGvBmI,EAAE,aAAaC,QAAQ,SAAUjJ,GACR,IAAjBA,EAAMkJ,SACNF,EAAE,WAAWG,UAGrBH,EAAE,aAAaC,QAAQ,SAAUjJ,GACR,IAAjBA,EAAMkJ,SACNF,EAAE,WAAWG,UAIrBxJ,EAAOyJ,MAAQ,WAEX,GADAzJ,EAAOkJ,eAAgB,EAClBlJ,EAAOH,KAAKqB,UAAalB,EAAOH,KAAK4G,SAGnC,CACH,GAAI5G,IACAqB,SAAUlB,EAAOH,KAAKqB,SACtBuF,SAAUzG,EAAOH,KAAK4G,SAE1BxF,GAAKwI,MAAM5J,GACNL,KAAK,SAAUC,GACRxB,OAAO8C,QAAQ,yBACf,IAAIE,IACAC,SAAUlB,EAAOH,KAAKqB,SACtBE,KAAM3B,EAAS2B,KACfsB,GAAIuB,SAASxE,EAASiD,IAEtB+D,SAAUhH,EAASgH,SAEvBtH,GAAoBQ,IAAI,OAAQsB,GAChC5B,EAAWK,MAAM,SACjBP,EAAoBgB,OAAO,gBACvBiJ,EACAlJ,EAAOc,GAAG,YAEVd,EAAOc,GAAG,SAEnB,SAAUpB,GACLA,EACA3B,OAAO2B,MAAMA,GAEb3B,OAAO2B,MAAM,+CA7BzB3B,QAAOkF,QAAQ,kDACflF,OAAOkF,QAAQ,wBAmC/BzF,QAAQC,OAAO,eAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,QACjBC,IAAK,QACLC,YAAa,qBACbvC,WAAY,gBAInBA,WAAW,WAAY,cAI5BrC,QAAQC,OAAO,mBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,YACjBC,IAAK,YACLC,YAAa,6BACbvC,WAAY,oBAInBA,WAAW,gBAAiB,SAAU,WAAY,sBAAuB,SAAUC,EAAQZ,EAAUD,GAClGa,EAAO0J,WAAavK,EAAoBW,IAAI,iBAC5CE,EAAOZ,SAAWD,EAAoBW,IAAI,gBAC1CV,EAASG,iBACJC,KAAK,WACFQ,EAAO0J,WAAavK,EAAoBW,IAAI,aAC5CE,EAAOZ,SAAWD,EAAoBW,IAAI,aAC3C,SAAUF,GACT3B,OAAO2B,MAAMA,QAI7BlC,QAAQC,OAAO,iBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,UACjBC,IAAK,UACLC,YAAa,yBACbvC,WAAY,kBAInBA,WAAW,cAAe,SAAU,QAAS,sBAAuB,SAAU,SAAU,OAAQ,aAAc,SAAUC,EAAQC,EAAOd,EAAqBe,EAAQyJ,EAAQ1I,EAAM5B,GAC/K,GAAIgH,GAAclH,EAAoBW,IAAI,WAC1CE,GAAOZ,SAAWD,EAAoBW,IAAI,gBACtCpC,QAAQ4I,UAAWD,IACnBpI,OAAOsI,KAAK,sDACZrG,EAAOc,GAAG,UAEVC,EAAKuF,aAAaH,EAAYnF,SAAUmF,EAAYI,UAC/CjH,KAAK,SAAUC,GACZN,EAAoBQ,IAAI,OAAQF,GAChC4G,EAAc5G,EACdkK,EAAOC,UAAUvD,EAAY3D,IACxBlD,KAAK,SAAUC,GACZO,EAAO2J,OAASlK,GACjB,SAAUG,GACLA,EACA3B,OAAO2B,MAAMA,GAEb3B,OAAO2B,MAAM,8CAG1B,WACC3B,OAAO2B,MAAM,oCACb3B,OAAOkF,QAAQ,yCACf9D,EAAWyB,cAK/BpD,QAAQC,OAAO,mBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,YACjBC,IAAK,YACLC,YAAa,6BACbvC,WAAY,oBAInBA,WAAW,gBAAiB,SAAU,WAAY,sBAAuB,SAAUC,EAAQZ,EAAUD,GAClGa,EAAO6J,WAAa1K,EAAoBW,IAAI,iBAC5CE,EAAOZ,SAAWD,EAAoBW,IAAI,gBAC1CV,EAAS0K,cACJtK,KAAK,WACFQ,EAAO6J,WAAa1K,EAAoBW,IAAI,cAC7C,SAAUF,GACT3B,OAAO2B,MAAMA,KAErBR,EAASG,iBACJC,KAAK,WACFQ,EAAOZ,SAAWD,EAAoBW,IAAI,aAC3C,SAAUF,GACT3B,OAAO2B,MAAMA,QAI7BlC,QAAQC,OAAO,6BAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,sBACjBC,IAAM,sBACNC,YAAc,iDACdvC,WAAa,8BAIpBA,WAAW,0BAA2B,SAAU,OAAQ,sBAAuB,SAAU,aAAc,SAAUC,EAAQiB,EAAM9B,EAAqBe,EAAQb,GAuBzJ,QAAS0K,KACL9I,EAAK+I,cACAxK,KAAK,SAAUC,GACZO,EAAOiK,MAAQxK,GAChB,SAAUG,GACLA,EACA3B,OAAO2B,MAAMA,GAEb3B,OAAO2B,MAAM,6CA9B7B,GAAIyG,GAAclH,EAAoBW,IAAI,WACtCpC,SAAQ4I,UAAWD,IACnBpI,OAAOsI,KAAK,sDACZrG,EAAOc,GAAG,UAEVC,EAAKuF,aAAaH,EAAYnF,SAAUmF,EAAYI,UAC/CjH,KAAK,SAAUC,GACZN,EAAoBQ,IAAI,OAAQF,GAChC4G,EAAc5G,EACU,SAApB4G,EAAYjF,MACZnD,OAAOsI,KAAK,8BACZrG,EAAOc,GAAG,SAEV+I,KAEL,WACC9L,OAAO2B,MAAM,oCACb3B,OAAOkF,QAAQ,yCACf9D,EAAWyB,WAiBvBd,EAAOkK,WAAa,SAAUhJ,GAC1BD,EAAKiJ,WAAWhJ,GACX1B,KAAK,SAAUC,GACZxB,OAAO8C,QAAQtB,GACfsK,KACD,SAAUnK,GACT3B,OAAO2B,MAAMA,SAKjClC,QAAQC,OAAO,OACVwM,QAAQ,YAAa,KAAM,QAAS,sBAAuB,aAAc,OAAQ,UAAW,SAAUC,EAAInK,EAAOd,EAAqBE,EAAYC,EAAM+K,GA6KrJ,QAASC,GAAcnE,GACnB,GAAIoE,KAIJ,OAHA7M,SAAQ6D,QAAQ4E,EAAO,SAAU3E,GAC7B+I,EAAQrI,KAAKV,EAAKgJ,UAEfD,EAjLX,GAAIE,KAEJA,GAAQlL,eAAiB,WACrB,GAAImL,GAAIN,EAAGO,OAkBX,OAjBA1K,GAAMH,IAAI,8CACLN,KAAK,SAAUC,GACZ,GAA4B,gBAAjBA,GAASI,KAChBP,EAAKM,MAAM,4BAA6BH,EAASI,MACjD6K,EAAEE,OAAOnL,EAASI,UACf,CACH,GAAIgL,GAASC,EAAarL,EAASI,KACnCV,GAAoBQ,IAAI,WAAYkL,GACpCxL,EAAWK,MAAM,mBACjBJ,EAAKiH,KAAK,mBACVkE,EAAQM,YAAYF,GACpBH,EAAEzF,QAAQ4F,KAEf,SAAUjL,GACTN,EAAKM,MAAM,4BAA6BA,GACxC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQ3C,WAAa,SAAU3B,GAC3B,GAAIuE,GAAIN,EAAGO,QACP9K,GACAqL,GAAK/E,EAAMzD,GAAGoG,WACdqC,KAAOhF,EAAM1F,KACb2K,MAAQjF,EAAM4B,MACdsD,MAAQlF,EAAM1C,MACd6H,IAAMnF,EAAMO,IACZ6E,YAAcpF,EAAM0C,UACpB2C,QAAUrF,EAAMmC,QAChBmD,QAAUtF,EAAMoC,SAChBC,OAASvE,SAASkC,EAAMqC,QACxBC,aAAeZ,WAAW1B,EAAMsC,cAChCiD,aAAevF,EAAMlD,YACrBuE,MAAQrB,EAAMqB,MACdmE,eAmBJ,OAjBA1L,GAAM2L,KAAK,yCAA0C/L,GAChDL,KAAK,SAAUC,GACS,6BAAjBA,EAASI,MACTP,EAAKM,MAAM,yBAA0BH,EAASI,MAC9C6K,EAAEE,OAAOnL,EAASI,OACM,2CAAjBJ,EAASI,MAChBP,EAAKM,MAAM,yBAA0BH,EAASI,MAC9C6K,EAAEE,OAAOnL,EAASI,QAElBP,EAAKiH,KAAK,iCACVkE,EAAQlL,iBACRmL,EAAEzF,QAAQxF,EAASI,QAExB,SAAUD,GACTN,EAAKM,MAAM,yBAA0BA,GACrC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQtF,UAAY,SAAUgB,GAC1B,GAAIuE,GAAIN,EAAGO,QACPjC,GAAO,GAAIC,OAAOC,UAClB/I,GACAqL,GAAK,IACLW,UAAY1F,EAAMjB,UAAU4D,WAC5BlG,MAAQuD,EAAMvD,MAAMkG,WACpBgD,MAAQ3F,EAAMtB,OACdkH,MAAQ5F,EAAMzB,MACdsH,KAAO7F,EAAMxB,QACbsH,MAAQvD,EAAKI,WAgBjB,OAdA7I,GAAM2L,KAAK,wCAAyC/L,GAC/CL,KAAK,SAAUC,GACS,6CAAjBA,EAASI,MACTP,EAAKM,MAAM,wBAAyBH,EAASI,MAC7C6K,EAAEE,OAAOnL,EAASI,QAElBP,EAAKiH,KAAK,gCACVkE,EAAQlL,iBACRmL,EAAEzF,QAAQxF,EAASI,QAExB,SAAUD,GACTN,EAAKM,MAAM,wBAAyBA,GACpC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQX,YAAc,WAClB,GAAIY,GAAIN,EAAGO,OAmBX,OAlBA1K,GAAMH,IAAI,8CACLN,KAAK,SAAUC,GACZ,GAA4B,gBAAjBA,GAASI,KAChBP,EAAKM,MAAM,4BAA6BH,EAASI,MACjD6K,EAAEE,OAAOnL,EAASI,UACf,CACH,GAAIqM,KACJxO,SAAQ6D,QAAQ9B,EAASI,KAAM,SAAU2B,GACrC0K,EAAIhK,KAAK+B,SAASzC,EAAK0J,KACvB/L,EAAoBQ,IAAI,YAAauM,KAEzC5M,EAAKiH,KAAK,oBACVmE,EAAEzF,QAAQiH,KAEf,SAAUtM,GACTN,EAAKM,MAAM,4BAA6BA,GACxC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQM,YAAc,SAAU3L,GAC5B,GAAI+M,KACJzO,SAAQ6D,QAAQnC,EAAU,SAAUoC,GAChCA,EAAK8G,QAAUrE,SAASzC,EAAK8G,SAC7B6D,EAAcjK,KAAKV,IAGvB,IAAI4K,GAAS/B,EAAQ,WAAW8B,EAAe,WAAW,GAGtDE,EAASD,EAAOE,MAAM,EAAG,GACzBC,IAGJ7O,SAAQ6D,QAAQ8K,EAAQ,SAAU7K,GAC9B+K,EAAYrK,KAAKV,EAAKkB,MAE1BvD,EAAoBQ,IAAI,YAAa4M,GAIzC,IAAIzB,GAAe,SAAU1L,GACzB,GAAIoN,MACA3L,IAgCJ,OA9BAnD,SAAQ6D,QAAQnC,EAAU,SAAUoC,GAEhC,GAAIiL,IAAa,CACjB/O,SAAQ6D,QAAQV,EAAQ,SAAUkH,GAC1BvG,EAAK4J,OAASrD,IACd0E,GAAa,IAIrB,IAAIC,IACAhK,GAAKuB,SAASzC,EAAK0J,IACnBzK,KAAOe,EAAK2J,KACZpD,MAAQvG,EAAK4J,MACb3H,MAAQoE,WAAWrG,EAAK6J,OACxB3E,IAAMzC,SAASzC,EAAK8J,KACpBzC,UAAYyB,EAAc9I,EAAK+J,aAC/BjD,QAAU9G,EAAKgK,QACfjD,SAAW/G,EAAKiK,QAChBjD,OAAShH,EAAKgH,OACdC,aAAejH,EAAKiH,aACpBjB,MAAQhG,EAAKgG,MACbvE,YAAczB,EAAKkK,aACnB5I,QAAU6J,EAAYnL,EAAKmK,aAE3Bc,IACA5L,EAAOqB,KAAKwK,EAAW3E,OAE3ByE,EAAYE,EAAWhK,IAAMgK,IAEjCvN,EAAoBQ,IAAI,SAAUkB,GAC3B2L,GAYPG,EAAc,SAAU7J,GACxB,GAAI0J,KAYJ,OAXA9O,SAAQ6D,QAAQuB,EAAS,SAAUtB,GAC/B,GAAIkL,IACAhK,GAAKuB,SAASzC,EAAK0J,IACnBtI,MAAQqB,SAASzC,EAAKoB,OACtBiC,OAASrD,EAAKsK,MACdpH,MAAQlD,EAAKuK,MACbpH,QAAUnD,EAAKwK,KACftD,KAAOzE,SAASzC,EAAKyK,OAEzBO,GAAYtK,KAAKwK,KAEdF,MAEX,OAAO/B,MASO,mBAAX9M,SAA6C,mBAAZiP,UAA2BjP,OAAOiP,UAAYA,UACtFjP,OAAOiP,QAAU,eAErB,SAAWlP,GACPA,EAAQC,OAAO,eAAgB,gBAC/BD,EAAQC,OAAO,SAAU,gBACzBD,EAAQC,OAAO,eAAgB,0BAA2B,sBAAuB,uBACrFD,EAAQC,OAAO,8BAA+B+D,OAAO,YAAa,MAAO,SAAUmL,GAC3E,GAAIC,KACJ,OAAO,UAAUC,EAAMC,GAKnB,MAJKF,GAAMC,KACPC,EAAcA,EAAcH,EAAII,WAAWD,EAAYlE,WAAWhH,eAAiB,GACnFgL,EAAMC,GAAQA,EAAOF,EAAII,WAAWF,EAAKjE,WAAWhH,eAAiBkL,GAElEF,EAAMC,OAGzBrP,EAAQC,OAAO,yBAA0B+D,OAAO,OAAQ,MAAO,SAAUmL,GACjE,MAAO,UAAUE,GACb,MAAOA,GAAOF,EAAII,WAAWF,EAAKjE,WAAWhH,eAAiBiL,MAG1ErP,EAAQC,OAAO,0BAA2BwM,QAAQ,OAAQ,WAClD,GAAI0C,IACAI,WAAa,SAAUC,GACnB,GAAI,OAASA,EACT,MAAO,KAEX,IAAIC,GAmFQC,EAAGC,EAAIC,EAAIC,EAAIC,EAAIC,EAAGC,EAAGC,EAAGC,EAlFpCC,EAAa,SAAUC,EAAQC,GAC/B,MAAOD,IAAUC,EAAaD,IAAW,GAAKC,GAE9CC,EAAc,SAAUC,EAAIC,GAC5B,GAAIC,GAAKC,EAAKC,EAAKC,EAAKC,CAMxB,OALAF,GAAW,WAALJ,EACNK,EAAW,WAALJ,EACNC,EAAW,WAALF,EACNG,EAAW,WAALF,EACNK,GAAgB,WAALN,IAAyB,WAALC,GAC3BC,EAAMC,EACW,WAAVG,EAAuBF,EAAMC,EAEpCH,EAAMC,EACQ,WAAVG,EACiB,WAAVA,EAAuBF,EAAMC,EAEnB,WAAVC,EAAuBF,EAAMC,EAGjCC,EAAUF,EAAMC,GAG3BE,EAAK,SAAUC,EAAGC,EAAGC,GACrB,MAAOF,GAAIC,GAAKD,EAAIE,GAEpBC,EAAK,SAAUH,EAAGC,EAAGC,GACrB,MAAOF,GAAIE,EAAID,GAAKC,GAEpBE,EAAK,SAAUJ,EAAGC,EAAGC,GACrB,MAAOF,GAAIC,EAAIC,GAEfG,EAAK,SAAUL,EAAGC,EAAGC,GACrB,MAAOD,IAAKD,GAAKE,IAEjBI,EAAM,SAAUtB,EAAGC,EAAGC,EAAGC,EAAGa,EAAGO,EAAGC,GAElC,MADAxB,GAAIO,EAAYP,EAAGO,EAAYA,EAAYQ,EAAGd,EAAGC,EAAGC,GAAIa,GAAIQ,IACrDjB,EAAYH,EAAWJ,EAAGuB,GAAItB,IAErCwB,EAAM,SAAUzB,EAAGC,EAAGC,EAAGC,EAAGa,EAAGO,EAAGC,GAElC,MADAxB,GAAIO,EAAYP,EAAGO,EAAYA,EAAYY,EAAGlB,EAAGC,EAAGC,GAAIa,GAAIQ,IACrDjB,EAAYH,EAAWJ,EAAGuB,GAAItB,IAErCyB,EAAM,SAAU1B,EAAGC,EAAGC,EAAGC,EAAGa,EAAGO,EAAGC,GAElC,MADAxB,GAAIO,EAAYP,EAAGO,EAAYA,EAAYa,EAAGnB,EAAGC,EAAGC,GAAIa,GAAIQ,IACrDjB,EAAYH,EAAWJ,EAAGuB,GAAItB,IAErC0B,EAAM,SAAU3B,EAAGC,EAAGC,EAAGC,EAAGa,EAAGO,EAAGC,GAElC,MADAxB,GAAIO,EAAYP,EAAGO,EAAYA,EAAYc,EAAGpB,EAAGC,EAAGC,GAAIa,GAAIQ,IACrDjB,EAAYH,EAAWJ,EAAGuB,GAAItB,IAErC2B,EAAqB,SAAUnC,GAS/B,IARA,GAAIoC,GACAC,EAAiBrC,EAAIsC,OACrBC,EAAuBF,EAAiB,EACxCG,GAAwBD,EAAuBA,EAAuB,IAAM,GAC5EE,EAA8C,IAA5BD,EAAuB,GACzCE,EAAa,GAAIC,OAAMF,EAAiB,GACxCG,EAAgB,EAChBC,EAAa,EACGR,EAAbQ,GACHT,GAAcS,EAAaA,EAAa,GAAK,EAC7CD,EAAgBC,EAAa,EAAI,EACjCH,EAAWN,GAAcM,EAAWN,GAAcpC,EAAI8C,WAAWD,IAAeD,EAChFC,GAOJ,OALAT,IAAcS,EAAaA,EAAa,GAAK,EAC7CD,EAAgBC,EAAa,EAAI,EACjCH,EAAWN,GAAcM,EAAWN,GAAc,KAAOQ,EACzDF,EAAWD,EAAiB,GAAKJ,GAAkB,EACnDK,EAAWD,EAAiB,GAAKJ,IAAmB,GAC7CK,GAEPK,EAAY,SAAUnC,GACtB,GAAmDoC,GAAOC,EAAtDC,EAAiB,GAAIC,EAAsB,EAC/C,KAAKF,EAAS,EAAa,GAAVA,EAAaA,IAC1BD,EAAQpC,IAAoB,EAATqC,EAAa,IAChCE,EAAsB,IAAMH,EAAMpH,SAAS,IAC3CsH,GAAkCC,EAAoBC,OAAOD,EAAoBb,OAAS,EAAG,EAEjG,OAAOY,IAEP3B,KAAuC8B,EAAM,EAAGC,EAAM,GAAIC,EAAM,GAAIC,EAAM,GAAIC,EAAM,EAAGC,EAAM,EAAGC,EAAM,GAAIC,EAAM,GAAIC,EAAM,EAAGC,EAAM,GAAIC,EAAM,GAAIC,EAAM,GAAIC,EAAM,EAAGC,EAAM,GAAIC,EAAM,GAAIC,EAAM,EAOlM,KANA7C,EAAIY,EAAmBnC,GACvBO,EAAI,WACJC,EAAI,WACJC,EAAI,WACJC,EAAI,UACJT,EAAKsB,EAAEe,OACFpC,EAAI,EAAOD,EAAJC,EAAQA,GAAK,GACrBC,EAAKI,EACLH,EAAKI,EACLH,EAAKI,EACLH,EAAKI,EACLH,EAAIsB,EAAItB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAImD,EAAK,YACnC3C,EAAImB,EAAInB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIoD,EAAK,YACnC7C,EAAIoB,EAAIpB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIqD,EAAK,WACnC/C,EAAIqB,EAAIrB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAIsD,EAAK,YACnCjD,EAAIsB,EAAItB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAImD,EAAK,YACnC3C,EAAImB,EAAInB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIoD,EAAK,YACnC7C,EAAIoB,EAAIpB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIqD,EAAK,YACnC/C,EAAIqB,EAAIrB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAIsD,EAAK,YACnCjD,EAAIsB,EAAItB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAImD,EAAK,YACnC3C,EAAImB,EAAInB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIoD,EAAK,YACnC7C,EAAIoB,EAAIpB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKqD,EAAK,YACpC/C,EAAIqB,EAAIrB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAKsD,EAAK,YACpCjD,EAAIsB,EAAItB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,IAAKmD,EAAK,YACpC3C,EAAImB,EAAInB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAKoD,EAAK,YACpC7C,EAAIoB,EAAIpB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKqD,EAAK,YACpC/C,EAAIqB,EAAIrB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAKsD,EAAK,YACpCjD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAIuD,EAAK,YACnC/C,EAAIsB,EAAItB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIwD,EAAK,YACnCjD,EAAIuB,EAAIvB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKyD,EAAK,WACpCnD,EAAIwB,EAAIxB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAI0D,EAAK,YACnCrD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAIuD,EAAK,YACnC/C,EAAIsB,EAAItB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAKwD,EAAK,UACpCjD,EAAIuB,EAAIvB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKyD,EAAK,YACpCnD,EAAIwB,EAAIxB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAI0D,EAAK,YACnCrD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAIuD,EAAK,WACnC/C,EAAIsB,EAAItB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAKwD,EAAK,YACpCjD,EAAIuB,EAAIvB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIyD,EAAK,YACnCnD,EAAIwB,EAAIxB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAI0D,EAAK,YACnCrD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,IAAKuD,EAAK,YACpC/C,EAAIsB,EAAItB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIwD,EAAK,YACnCjD,EAAIuB,EAAIvB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIyD,EAAK,YACnCnD,EAAIwB,EAAIxB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAK0D,EAAK,YACpCrD,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI2D,EAAK,YACnCnD,EAAIuB,EAAIvB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAI4D,EAAK,YACnCrD,EAAIwB,EAAIxB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAK6D,EAAK,YACpCvD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAK8D,EAAK,YACpCzD,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI2D,EAAK,YACnCnD,EAAIuB,EAAIvB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAI4D,EAAK,YACnCrD,EAAIwB,EAAIxB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAI6D,EAAK,YACnCvD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAK8D,EAAK,YACpCzD,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,IAAK2D,EAAK,WACpCnD,EAAIuB,EAAIvB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAI4D,EAAK,YACnCrD,EAAIwB,EAAIxB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAI6D,EAAK,YACnCvD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAI8D,EAAK,UACnCzD,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI2D,EAAK,YACnCnD,EAAIuB,EAAIvB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAK4D,EAAK,YACpCrD,EAAIwB,EAAIxB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAK6D,EAAK,WACpCvD,EAAIyB,EAAIzB,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAI8D,EAAK,YACnCzD,EAAI2B,EAAI3B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI+D,EAAK,YACnCvD,EAAIwB,EAAIxB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIgE,EAAK,YACnCzD,EAAIyB,EAAIzB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKiE,EAAK,YACpC3D,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAIkE,EAAK,YACnC7D,EAAI2B,EAAI3B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,IAAK+D,EAAK,YACpCvD,EAAIwB,EAAIxB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,GAAIgE,EAAK,YACnCzD,EAAIyB,EAAIzB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,IAAKiE,EAAK,YACpC3D,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAIkE,EAAK,YACnC7D,EAAI2B,EAAI3B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI+D,EAAK,YACnCvD,EAAIwB,EAAIxB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAKgE,EAAK,YACpCzD,EAAIyB,EAAIzB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIiE,EAAK,YACnC3D,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,IAAKkE,EAAK,YACpC7D,EAAI2B,EAAI3B,EAAGC,EAAGC,EAAGC,EAAGa,EAAErB,EAAI,GAAI+D,EAAK,YACnCvD,EAAIwB,EAAIxB,EAAGH,EAAGC,EAAGC,EAAGc,EAAErB,EAAI,IAAKgE,EAAK,YACpCzD,EAAIyB,EAAIzB,EAAGC,EAAGH,EAAGC,EAAGe,EAAErB,EAAI,GAAIiE,EAAK,WACnC3D,EAAI0B,EAAI1B,EAAGC,EAAGC,EAAGH,EAAGgB,EAAErB,EAAI,GAAIkE,EAAK,YACnC7D,EAAIO,EAAYP,EAAGJ,GACnBK,EAAIM,EAAYN,EAAGJ,GACnBK,EAAIK,EAAYL,EAAGJ,GACnBK,EAAII,EAAYJ,EAAGJ,EAEvB,IAAI+D,GAAOtB,EAAUxC,GAAKwC,EAAUvC,GAAKuC,EAAUtC,GAAKsC,EAAUrC,EAClE,OAAO2D,GAAKzP,eAGpB,OAAO+K,OAEZnP,SAEHA,QAAQC,OAAO,OACVwM,QAAQ,UAAW,KAAM,QAAS,sBAAuB,OAAQ,SAAUC,EAAInK,EAAOd,EAAqBG,GAgDxG,QAASkS,GAAWrL,GAChB,GAAI0E,KAYJ,OAXAnN,SAAQ6D,QAAQ4E,EAAO,SAAUsL,GAC7B,GAAIC,KACJA,IACIhP,GAAIuB,SAASwN,EAAMvG,IACnByG,OAAQ1N,SAASwN,EAAMG,QACvBlJ,KAAMzE,SAASwN,EAAMxF,OACrBzG,WAAYqC,WAAW4J,EAAMpG,OAC7BjM,SAAU0L,EAAa2G,EAAMI,qBAEjChH,EAAO3I,KAAKwP,KAET7G,EAGX,QAASC,GAAa3E,GAClB,GAAI0E,KAWJ,OAVAnN,SAAQ6D,QAAQ4E,EAAO,SAAU3E,GAC7B,GAAIkL,KACJA,IACIhK,GAAIuB,SAASzC,EAAKqK,WAClBvK,SAAU2C,SAASzC,EAAKsQ,QACxBrO,MAAOoE,WAAWrG,EAAK6J,OACvB5K,KAAMe,EAAK2J,MAEfN,EAAO3I,KAAKwK,KAET7B,EAGX,QAASkH,GAAa5L,GAClB,GAAI/G,GAAWD,EAAoBW,IAAI,gBACnC+K,IAcJ,OAbAnN,SAAQ6D,QAAQ4E,EAAO,SAAU3E,GAC7B,GAAIkL,KACAtN,GAASoC,EAAKC,UACdiL,GACIb,UAAYrK,EAAKC,OAAOqH,WACxBqC,KAAM/L,EAASoC,EAAKC,QAAQhB,KAC5BqR,OAAStQ,EAAKF,SAASwH,WACvBkJ,QAAU,IACV3G,MAAQjM,EAASoC,EAAKC,QAAQgC,MAAMqF,YAExC+B,EAAO3I,KAAKwK,MAGb7B,EA9FX,GAAIJ,KAiGJ,OA/FAA,GAAQwH,SAAW,SAAU9L,GACzB,GAAIuE,GAAIN,EAAGO,QACP9K,GACAqL,GAAI,IACJ0G,OAAQzL,EAAMwL,OAAO7I,WACrBmD,MAAO9F,EAAMuC,KAAKI,WAClBuC,MAAOlF,EAAMX,WAAWsD,WACxB+I,mBAAoBE,EAAa5L,EAAMxE,OAe3C,OAbA1B,GAAM2L,KAAK,uCAAwC/L,GAC9CL,KAAK,SAASC,GACU,8CAAjBA,EAASI,MACTP,EAAKM,MAAM,sBACX8K,EAAEE,OAAOnL,EAASI,QAElBP,EAAKiH,KAAK,eACVmE,EAAEzF,QAAQxF,EAASI,QAExB,SAAUD,GACTN,EAAKM,MAAM,uBAAwBA,GACnC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQb,UAAY,SAAUlH,GAC1B,GAAIgI,GAAIN,EAAGO,OAgBX,OAfA1K,GAAMH,IAAI,wCAA0C4C,GAC/ClD,KAAK,SAAUC,GACZ,GAAoB,6CAAjBA,EAASI,KACRP,EAAKM,MAAM,wBACX8K,EAAEE,OAAOnL,EAASI,UACf,CACH,GAAI8J,GAAS6H,EAAW/R,EAASI,KACjCP,GAAKiH,KAAK,iBACVmE,EAAEzF,QAAQ0E,KAEf,SAAU/J,GACTN,EAAKM,MAAM,yBAA0BA,GACrC8K,EAAEE,OAAOhL,EAAMoL,cAGhBN,EAAEO,SAqDNR,KAGf/M,QAAQC,OAAO,OACVwM,QAAQ,QAAS,KAAM,QAAS,MAAO,OAAQ,SAAUC,EAAInK,EAAO4M,EAAKvN,GA8HtE,QAAS4S,GAAU/L,GACf,GAAI0E,KAYJ,OAVAnN,SAAQ6D,QAAQ4E,EAAO,SAAUlF,GAC7B,GAAIyL,KACJA,IACIhK,GAAKuB,SAAShD,EAAKiK,IACnBhK,SAAWD,EAAKkR,aAChBC,MAAQnR,EAAKoR,MACbjR,KAAOH,EAAKqR,OAEhBzH,EAAO3I,KAAKwK,KAET7B,EA1IX,GAAIJ,KA6IJ,OA3IAA,GAAQ8H,QAAU,SAAUpM,GACxB,GAAIuE,GAAIN,EAAGO,QACP9K,GACAqL,GAAK,IACLiH,aAAehM,EAAMjF,SACrBsR,SAAWrM,EAAMM,SACjB4L,MAAQlM,EAAMiM,MACdE,MAAQnM,EAAM/E,KAelB,OAbAnB,GAAM2L,KAAK,sCAAuC/L,GAC7CL,KAAK,SAAUC,GACS,qCAAjBA,EAASI,MAAgE,0BAAjBJ,EAASI,MACjEP,EAAKM,MAAM,sBAAuBH,EAASI,MAC3C6K,EAAEE,OAAOnL,EAASI,QAElBP,EAAKiH,KAAK,cACVmE,EAAEzF,QAAQxF,EAASI,QAExB,SAAUD,GACTN,EAAKM,MAAM,sBAAuBA,GAClC8K,EAAEE,OAAOhL,EAAMoL,cAEhBN,EAAEO,SAGbR,EAAQhB,MAAQ,SAAUtD,GACtB,GAAIuE,GAAIN,EAAGO,OAsBX,OArBA1K,GAAMH,IAAI,uCAAyCqG,EAAMjF,UACpD1B,KAAK,SAAUC,GACS,qCAAjBA,EAASI,MACTP,EAAKM,MAAM,8CACX8K,EAAEE,OAAOnL,EAASI,OACmB,QAA9BJ,EAASI,KAAKsS,cACrB7S,EAAKmT,KAAK,uCACV/H,EAAEE,OAAO,8BACFnL,EAASI,KAAK2S,WAAarM,EAAMM,UACxCnH,EAAKiH,KAAK,kBAEVmE,EAAEzF,SAAS7D,KAAO3B,EAASI,KAAKyS,MAAO5P,GAAKjD,EAASI,KAAKqL,GAAIzE,SAAWoG,EAAII,WAAWxN,EAASI,KAAK2S,cAEtGlT,EAAKmT,KAAK,oCACV/H,EAAEE,OAAO,sBAEd,SAAUhL,GACTN,EAAKM,MAAM,iBAAkBA,GAC7B8K,EAAEE,OAAOhL,EAAMoL,cAGhBN,EAAEO,SAGbR,EAAQT,YAAc,WAClB,GAAIU,GAAIN,EAAGO,OAiBX,OAfA1K,GAAMH,IAAI,wCACLN,KAAK,SAAUC,GACZ,GAA4B,gBAAjBA,GAASI,KAChBP,EAAKM,MAAM,4BAA6BH,EAASI,MACjD6K,EAAEE,OAAOnL,EAASI,UACf,CACHP,EAAKiH,KAAK,eACV,IAAI0D,GAAQiI,EAAUzS,EAASI,KAC/B6K,GAAEzF,QAAQgF,KAEf,SAAUrK,GACTN,EAAKM,MAAM,4BAA6BA,GACxC8K,EAAEE,OAAOhL,KAGV8K,EAAEO,SAQbR,EAAQjE,aAAe,SAAUtF,EAAUwR,GACvC,GAAIhI,GAAIN,EAAGO,OAsBX,OArBA1K,GAAMH,IAAI,uCAAyCoB,GAC9C1B,KAAK,SAAUC,GACS,qCAAjBA,EAASI,MACTP,EAAKM,MAAM,uDACX8K,EAAEE,OAAOnL,EAASI,OACmB,QAA9BJ,EAASI,KAAKsS,cACrB7S,EAAKmT,KAAK,+CACV/H,EAAEE,OAAO,8BAEFiC,EAAII,WAAWxN,EAASI,KAAK2S,YAAcE,GAClDpT,EAAKiH,KAAK,iCACVmE,EAAEzF,SAAS7D,KAAO3B,EAASI,KAAKyS,MAAO5P,GAAKuB,SAASxE,EAASI,KAAKqL,IAAKhK,SAAWA,EAAUuF,SAAUiM,MAEvGpT,EAAKmT,KAAK,0CACV/H,EAAEE,OAAO,sCAEd,SAAUhL,GACTN,EAAKmT,KAAK,0BAA2B7S,GACrC8K,EAAEE,OAAOhL,EAAMoL,cAGhBN,EAAEO,SAGbR,EAAQP,WAAa,SAAUhJ,GAC3B,GAAIwJ,GAAIN,EAAGO,OAgBX,OAdA1K,GAAMH,IAAI,0CAA4CoB,GACjD1B,KAAK,SAAUC,GACS,wBAAjBA,EAASI,MAAmD,0BAAjBJ,EAASI,MACpDP,EAAKM,MAAM,wBAAyBH,EAASI,MAC7C6K,EAAEE,OAAOnL,EAASI,QAElBP,EAAKiH,KAAK,gBACVmE,EAAEzF,QAAQxF,EAASI,QAExB,SAAUD,GACTN,EAAKM,MAAM,wBAAyBA,GACpC8K,EAAEE,OAAOhL,KAGV8K,EAAEO,SAmBNR,KAGf/M,QAAQC,OAAO,kBACVoC,WAAW,cAAe,SAAU,oBAAqB,QAAS,QAAS,UAAW,SAAUC,EAAQ2S,EAAmB/P,EAAO8B,EAAOC,GAEtI3E,EAAO4C,MAAQA,EACf5C,EAAO2E,QAAUA,EACjB3E,EAAO0E,MAAQA,EACfA,EAAQ1E,EAAO4S,aAAc,EAAO5S,EAAO4S,aAAc,EAGzD5S,EAAO6S,WAAa,WAChB7S,EAAO2E,SAAW3E,EAAO0E,MAAQ1E,EAAO8S,SAAU,EAAO9S,EAAO8S,SAAU,GAE9E9S,EAAO6S,aAEP7S,EAAO+S,OAAS,WACZ,GAAIlR,IACA6C,MAAO1E,EAAO0E,MACdC,QAAS3E,EAAO2E,QAChB/B,MAAO5C,EAAO4C,MAElB+P,GAAkBK,MAAMnR,IAE5B7B,EAAOiT,OAAS,WACZN,EAAkBO,cAI9BxV,QAAQC,OAAO,mBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,YACjBC,IAAM,YACNC,YAAc,kCACdvC,WAAa,oBAIpBA,WAAW,gBAAiB,SAAU,sBAAuB,SAAU,SAAU,SAAUC,EAAQb,EAAqBe,EAAQyJ,GAC7H,GAAI1I,GAAO9B,EAAoBW,IAAI,WAC9BmB,GAAKC,WAEN/B,EAAoBQ,IAAI,gBAAgB,GACxC1B,OAAOsI,KAAK,6BACZrG,EAAOc,GAAG,UAEdhB,EAAOqB,KAAOlC,EAAoBW,IAAI,YAGlCpC,QAAQ4I,UAAWtG,EAAOqB,OAC1BnB,EAAOc,GAAG,QAGdhB,EAAOZ,SAAWD,EAAoBW,IAAI,gBAE1CE,EAAOuF,iBAAmB,WACtBvF,EAAOwF,WAAa,EACpB9H,QAAQ6D,QAAQvB,EAAOqB,KAAM,SAAUG,GACnCxB,EAAOwF,YAAchE,EAAKF,SAAWtB,EAAOZ,SAASoC,EAAKC,QAAQgC,SAI1EzD,EAAOiS,SAAW,WACd,GAAI5Q,GAAOlC,EAAoBW,IAAI,QAC/BD,GACA8R,OAAS1Q,EAAKyB,GACdgG,MAAO,GAAIC,OAAOC,UAClBpD,WAAaxF,EAAOwF,WACpB7D,MAAQN,EAEZsI,GAAOsI,SAASpS,GACXL,KAAK,SAAUC,GACZxB,OAAO8C,QAAQtB,GACfN,EAAoBgB,OAAO,QAC3BD,EAAOc,GAAG,WACX,SAAUpB,GACJA,EAGD3B,OAAO2B,MAAMA,GAFb3B,OAAO2B,MAAM,8CAM7BI,EAAOuF,sBAIf7H,QAAQC,OAAO,mBAEVC,QAAQ,iBAAkB,SAAUuE,GACjCA,EAAeC,MAAM,YACjBC,IAAK,YACLC,YAAa,mCACbvC,WAAY,oBAInBA,WAAW,gBAAiB,SAAU,OAAQ,SAAU,SAAUC,EAAQiB,EAAMf,GAC7EF,EAAOH,QACPG,EAAOH,KAAKqB,SAAW,GACvBlB,EAAOH,KAAKuS,MAAQ,GACpBpS,EAAOH,KAAK4G,SAAW,GACvBzG,EAAOH,KAAKsT,gBAAkB,GAC9BnT,EAAO2G,WAAY,EAGnB3G,EAAOoT,QAAU,yJAGjBpT,EAAOqT,SAAW,WAEd,GADArT,EAAO2G,WAAY,EACd3G,EAAOH,KAAKqB,UAAalB,EAAOH,KAAK4G,UAAazG,EAAOH,KAAKsT,gBAE5D,GAAKnT,EAAOH,KAAKuS,OAAUpS,EAAOoT,QAAQhN,KAAKpG,EAAOH,KAAKuS,OAE3D,GAAIpS,EAAOH,KAAK4G,UAAYzG,EAAOH,KAAKsT,gBAC3ClV,OAAOkF,QAAQ,wCAAyC,kCACrD,IAAInD,EAAOH,KAAKqB,SAASsO,OAAS,EACrCvR,OAAOkF,QAAQ,6BACZ,IAAInD,EAAOH,KAAK4G,SAAS+I,OAAS,EACrCvR,OAAOkF,QAAQ,yBACZ,CACH,GAAItD,IACAqB,SAAUlB,EAAOH,KAAKqB,SACtBuF,SAAUzG,EAAOH,KAAK4G,SACtB2L,MAAOpS,EAAOH,KAAKuS,MACnBhR,KAAM,OAEVH,GAAKsR,QAAQ1S,GACRL,KAAK,WACFvB,OAAO8C,QAAQ,4CACfb,EAAOc,GAAG,SACV/C,OAAOsI,KAAK,kDACb,SAAU3G,GACLA,EACA3B,OAAO2B,MAAMA,GAEb3B,OAAO2B,MAAM,+CAvBzB3B,QAAOkF,QAAQ,kCAAmC,kCAFlDlF,QAAOkF,QAAQ,wCAAyC,gCAgCrE5F,OAAQC","file":"app.min.js","sourcesContent":["(function(window, document, undefined) {\n'use strict';\nangular.module('app', [\r\n    'ui.router',\r\n    'ui.bootstrap',\r\n    'LocalStorageModule',\r\n    'ngAnimate',\r\n    'templates',\r\n    'textAngular',\r\n    'angular-md5',\r\n    // 'ngSanitize',\r\n    'app.home',\r\n    'app.addArticle',\r\n    'app.topGames',\r\n    'app.newGames',\r\n    'app.gameDetail',\r\n    'app.login',\r\n    'app.genre',\r\n    'app.cart',\r\n    'app.checkout',\r\n    'app.orders',\r\n    'app.userAdministration',\r\n    'app.register'\r\n])\r\n    .config([\"$urlRouterProvider\", \"localStorageServiceProvider\", function ($urlRouterProvider, localStorageServiceProvider) {\r\n        $urlRouterProvider.otherwise('/home');\r\n        localStorageServiceProvider.setPrefix('webshop');\r\n        toastr.options = {\r\n            \"closeButton\": false,\r\n            \"debug\": false,\r\n            \"newestOnTop\": false,\r\n            \"progressBar\": false,\r\n            \"positionClass\": \"toast-bottom-right\",\r\n            \"preventDuplicates\": false,\r\n            \"onclick\": null,\r\n            \"showDuration\": \"300\",\r\n            \"hideDuration\": \"1000\",\r\n            \"timeOut\": \"5000\",\r\n            \"extendedTimeOut\": \"1000\",\r\n            \"showEasing\": \"swing\",\r\n            \"hideEasing\": \"linear\",\r\n            \"showMethod\": \"fadeIn\",\r\n            \"hideMethod\": \"fadeOut\"\r\n        }\r\n    }])\r\n    .run([\"localStorageService\", \"articles\", \"$rootScope\", \"$log\", function (localStorageService, articles, $rootScope, $log) {\r\n        articles.getAllArticles()\r\n            .then(function (response) {\r\n                $rootScope.$emit('genresLoaded');\r\n                localStorageService.set('articles', response);\r\n            }, function (error) {\r\n                var data = localStorageService.get('articles');\r\n                if (data) {\r\n                    toastr.error('Artikel konnten nicht neu geladen werden. Daten wurden aus dem Cache geladen.')\r\n                } else {\r\n                    toastr.error('Artikel konnten nicht geladen werden.');\r\n                }\r\n                $log.error(error);\r\n            });\r\n        localStorageService.set('fromCheckout', false);\r\n    }])\r\n    // controller for the navbar\r\n    .controller('AppCtrl', [\"$scope\", \"$rootScope\", \"$http\", \"localStorageService\", \"$state\", \"articles\", function ($scope, $rootScope, $http, localStorageService, $state, articles) {\r\n        localStorageService.remove('checkout');\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            function (event, toState, toParams) {\r\n                $scope.currentStateName = toState.name;\r\n                $scope.currentStateParams = toParams.name;\r\n            });\r\n\r\n        $rootScope.$on('itemAddedToCart', function () {\r\n            countCartItems();\r\n        });\r\n\r\n        $rootScope.$on('login', function () {\r\n            getUserData();\r\n        });\r\n\r\n        // load genres initially and when articles are loaded\r\n        $scope.genres = localStorageService.get(\"genres\");\r\n        $rootScope.$on(\"articles-loaded\", function () {\r\n            $scope.genres = localStorageService.get(\"genres\");\r\n        });\r\n\r\n        $rootScope.logout = function () {\r\n            localStorageService.remove('user');\r\n            localStorageService.remove('orders');\r\n            localStorageService.remove('checkout');\r\n            // update user data\r\n            $rootScope.$emit('login');\r\n            $rootScope.$emit('itemAddedToCart');\r\n            toastr.success('Logout war erfolgreich.');\r\n            $state.go('login');\r\n        };\r\n\r\n        // get user data, display user name in navbar, show more options in navbar if the user is an admin\r\n        var getUserData = function () {\r\n            var user = localStorageService.get('user') || {};\r\n            $scope.userName = user.userName || 'Benutzer';\r\n            $scope.userRole = user.role;\r\n        };\r\n        getUserData();\r\n\r\n        // count the total items in the cart\r\n        var countCartItems = function () {\r\n            var cart = localStorageService.get('cart');\r\n            $scope.quantity = 0;\r\n            var articles = localStorageService.get('articles') || {};\r\n            angular.forEach(cart, function (item) {\r\n                if (articles[item.itemId]) {\r\n                    $scope.quantity += item.quantity;\r\n                } else {\r\n                    // remove items from cart which have no valid article ID\r\n                    delete cart[item.itemId];\r\n                }\r\n            });\r\n            localStorageService.set('cart', cart);\r\n        };\r\n        countCartItems();\r\n    }])\r\n    .filter('objectFilter', function () {\r\n        return function (items, search) {\r\n            var result = [];\r\n            search = search ? search.toLowerCase() : '';\r\n            angular.forEach(items, function (value, key) {\r\n                if (value.name.toLowerCase().indexOf(search) !== -1) {\r\n                    result.push(value);\r\n                }\r\n            });\r\n            return result;\r\n\r\n        }\r\n    });\n\r\nangular.module('app.gameDetail', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('gameDetail', {\r\n            url : '/gameDetail/:id',\r\n            templateUrl : 'app/gameDetail/gameDetail.html',\r\n            controller : 'GameDetailCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('GameDetailCtrl', [\"$scope\", \"$http\", \"$stateParams\", \"localStorageService\", \"$uibModal\", \"$state\", \"articles\", \"$rootScope\", function ($scope, $http, $stateParams, localStorageService, $uibModal, $state, articles, $rootScope) {\r\n        $scope.tab = {};\r\n        $scope.tab.active = 'description';\r\n\r\n        $scope.quantity = 1;\r\n\r\n        $scope.isValidQuantity = true;\r\n        $scope.calcPrice = function () {\r\n            var price = $scope.actualGame.price * $scope.quantity;\r\n            if (isNaN(price) || $scope.quantity < 1 || $scope.quantity > 20) {\r\n                //&#8209; : minus without line break\r\n                $scope.price = \"Bitte gültige Anzahl (1&#8209;20) angeben!\";\r\n                $scope.isValidQuantity = false;\r\n            } else {\r\n                $scope.price = Math.round(price * 100) / 100;\r\n                $scope.isValidQuantity = true;\r\n            }\r\n        };\r\n\r\n        // load game at initial start\r\n        loadGame();\r\n\r\n        function loadGame() {\r\n            // get the id from the url parameters\r\n            var id = $stateParams.id;\r\n            $scope.articles = localStorageService.get('articles');\r\n            $scope.actualGame = $scope.articles[id];\r\n            if (!$scope.actualGame) {\r\n                toastr.warning('Das Spiel mit der ID ' + id + ' existiert nicht!');\r\n                $state.go('home');\r\n            } else {\r\n                $scope.stars = calculateAverageStars($scope.actualGame.reviews);\r\n                document.getElementById(\"description\").innerHTML = $scope.actualGame.description;\r\n                $scope.calcPrice();\r\n            }\r\n        }\r\n\r\n        $rootScope.$on(\"articles-loaded\", function () {\r\n            // not every time the event is fired, the game detail site is opened\r\n            // only react to the event when the site is opened\r\n            if ($state.current.name == \"gameDetail\") {\r\n                loadGame();\r\n            }\r\n        });\r\n\r\n        var user = localStorageService.get('user') || {};\r\n        var userName = user.userName;\r\n\r\n        function calculateAverageStars(data) {\r\n            var count = 0;\r\n            var stars = 0;\r\n            angular.forEach(data, function (item) {\r\n                count++;\r\n                stars += item.stars;\r\n            });\r\n            $scope.reviewsCount = count;\r\n            if (count === 0) {\r\n                return 0;\r\n            } else {\r\n                return stars / count;\r\n            }\r\n        }\r\n\r\n        $scope.changeTab = function (type) {\r\n            $scope.tab.active = type;\r\n        };\r\n\r\n        $scope.toCart = function () {\r\n            if ($scope.quantity >= 1) {\r\n                var cart = localStorageService.get('cart') || {};\r\n                // merge item quantity with cart quantity\r\n                if (cart[$scope.actualGame.id] && cart[$scope.actualGame.id].quantity) {\r\n                    cart[$scope.actualGame.id].quantity = parseInt(cart[$scope.actualGame.id].quantity) + parseInt($scope.quantity)\r\n                } else {\r\n                    cart[$scope.actualGame.id] = {\r\n                        itemId : $scope.actualGame.id,\r\n                        quantity : parseInt($scope.quantity)\r\n                    };\r\n                }\r\n                localStorageService.set('cart', cart);\r\n                $rootScope.$emit('itemAddedToCart');\r\n                toastr.success('<img src=\"assets/img/giphy.gif\" ng-show=\"inCart\"/>');\r\n                toastr.success('Artikel erfolgreich ' + $scope.quantity + 'x in den Warenkorb gelegt!');\r\n            } else {\r\n                toastr.warning('Bitte geben Sie eine gültige Zahl ein!')\r\n            }\r\n        };\r\n\r\n        // logic for rating\r\n        $scope.starsActivator = {};\r\n        $scope.numbers = [1, 2, 3, 4, 5];\r\n        for (var i = 0; i <= 4; i++) {\r\n            $scope.starsActivator[$scope.numbers[i]] = false;\r\n        }\r\n        $scope.starHover = function (number) {\r\n            while (number > 0) {\r\n                $scope.starsActivator[number] = true;\r\n                number--;\r\n            }\r\n        };\r\n        $scope.leave = function () {\r\n            for (var i = 0; i <= 4; i++) {\r\n                $scope.starsActivator[$scope.numbers[i]] = false;\r\n            }\r\n        };\r\n        $scope.rate = function (stars) {\r\n            if (userName) {\r\n                var newReviewId = 1;\r\n                do {\r\n                    newReviewId++;\r\n                } while ($scope.actualGame.reviews[newReviewId]);\r\n                var title = '';\r\n                var message = '';\r\n                angular.forEach($scope.actualGame.reviews, function (review) {\r\n                    if (review.author == user.userName) {\r\n                        title = review.title;\r\n                        message = review.message;\r\n                        newReviewId = review.id;\r\n                    }\r\n                });\r\n                // modal\r\n                var modalInstance = $uibModal.open({\r\n                    animation : true,\r\n                    templateUrl : 'app/gameDetail/rating/rating.html',\r\n                    controller : 'RatingCtrl',\r\n                    // if user wrote a review before, pre-filling the input fields\r\n                    resolve : {\r\n                        stars : function () {\r\n                            return stars;\r\n                        },\r\n                        title : function () {\r\n                            return title;\r\n                        },\r\n                        message : function () {\r\n                            return message;\r\n                        }\r\n                    }\r\n                });\r\n                // code when modal is closed\r\n                modalInstance.result.then(function (result) {\r\n                    // modal has been closed because user wants to send a review\r\n                    var data = {\r\n                        id : 0,\r\n                        stars : result.stars,\r\n                        title : result.title,\r\n                        message : result.message,\r\n                        author : userName,\r\n                        articleId : $scope.actualGame.id\r\n                    };\r\n                    articles.addReview(data)\r\n                        .then(function () {\r\n                            toastr.success('Bewertung hinzugefügt!');\r\n                        }, function (error) {\r\n                            toastr.error(\"Bewertung wurde nicht hinzugefügt!\");\r\n                            if (error) {\r\n                                toastr.error(error);\r\n                            } else {\r\n                                toastr.error(\"Ein unbekannter Fehler ist aufgetreten!\");\r\n                            }\r\n                        });\r\n                }, function () {\r\n                    // modal has been closed because user pressed the cancel button\r\n                    console.log('Modal dismissed');\r\n                });\r\n            } else {\r\n                toastr.warning('Bitte loggen Sie sich zuerst ein!');\r\n            }\r\n        };\r\n    }]);\n\r\nangular.module('app.cart', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('cart', {\r\n            url: '/cart',\r\n            templateUrl: 'app/cart/cart.html',\r\n            controller: 'CartCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('CartCtrl', [\"localStorageService\", \"$scope\", \"$rootScope\", function (localStorageService, $scope, $rootScope) {\r\n        $scope.cart = localStorageService.get('cart');\r\n        $scope.articles = localStorageService.get('articles');\r\n        $scope.isInvalid = false;\r\n\r\n        $scope.updateTotalPrice = function () {\r\n            $scope.totalPrice = 0;\r\n            angular.forEach($scope.cart, function (item) {\r\n                $scope.totalPrice += item.quantity * $scope.articles[item.itemId].price;\r\n            });\r\n        };\r\n        $scope.updateTotalPrice();\r\n\r\n        $scope.isInt = function (n) {\r\n            n = parseInt(n);\r\n            return Number(n) === n && n % 1 === 0;\r\n        };\r\n\r\n        $scope.quantityChange = function (id) {\r\n            var newQuantity = parseInt($scope.cart[id].quantity);\r\n            if (newQuantity < 1 || newQuantity > 20 || !$scope.isInt(newQuantity)) {\r\n                $scope.isInvalid = true;\r\n            } else {\r\n                $scope.isInvalid = false;\r\n                $scope.cart[id].quantity = newQuantity;\r\n                $scope.updateTotalPrice();\r\n                localStorageService.set('cart', $scope.cart);\r\n                $rootScope.$emit('itemAddedToCart');\r\n            }\r\n        };\r\n\r\n        $scope.remove = function (id) {\r\n            delete $scope.cart[id];\r\n            $scope.updateTotalPrice();\r\n            localStorageService.set('cart', $scope.cart);\r\n            $rootScope.$emit('itemAddedToCart');\r\n        }\r\n    }]);\n\r\nangular.module('app.addArticle', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('addArticle', {\r\n            url : '/addArticle',\r\n            templateUrl : 'app/addArticle/addArticle.html',\r\n            controller : 'AddArticleCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('AddArticleCtrl', [\"$scope\", \"articles\", \"$log\", \"$state\", \"localStorageService\", \"user\", \"$rootScope\", function ($scope, articles, $log, $state, localStorageService, user, $rootScope) {\r\n        var currentUser = localStorageService.get(\"user\") || {};\r\n        if (angular.equals({}, currentUser)) {\r\n            toastr.info(\"Sie müssen sich einloggen, um diese Seite zu sehen\");\r\n            $state.go(\"login\");\r\n        } else {\r\n            user.authenticate(currentUser.userName, currentUser.password)\r\n                .then(function (response) {\r\n                    localStorageService.set(\"user\", response);\r\n                    currentUser = response;\r\n                    if (currentUser.role != \"admin\") {\r\n                        toastr.info(\"Diese Seite ist geschützt!\");\r\n                        $state.go(\"home\");\r\n                    }\r\n                }, function () {\r\n                    toastr.error(\"Fehler bei der Authentifizierung\");\r\n                    toastr.warning(\"Sie werden nun automatisch ausgeloggt\");\r\n                    $rootScope.logout();\r\n                });\r\n        }\r\n        $scope.selected = {};\r\n        $scope.selected.platform = {};\r\n        $scope.selected.fsk = '0';\r\n        $scope.isTouched = false;\r\n        $scope.isPriceInvalid = false;\r\n        $scope.isPriceTouched = false;\r\n        $scope.isCustomGenre = false;\r\n        $scope.genreButtonText = 'Neues Genre anlegen';\r\n\r\n        // function that returns all selected checkboxes\r\n        function checkPlatforms() {\r\n            var selected = [];\r\n            angular.forEach($scope.selected.platform, function (bool, key) {\r\n                if (bool) {\r\n                    selected.push(key);\r\n                }\r\n            });\r\n            return selected;\r\n        }\r\n\r\n        $scope.genres = localStorageService.get(\"genres\") || [];\r\n        articles.getAllArticles()\r\n            .then(function () {\r\n                $scope.genres = localStorageService.get(\"genres\") || [];\r\n            }, function (error) {\r\n                toastr.error(error);\r\n            });\r\n\r\n        function validatePrice(input) {\r\n            return /(?=.)^\\$?(([1-9][0-9]{0,2}(,[0-9]{3})*)|[0-9]+)?(\\.[0-9]{1,2})?$/.test(input);\r\n        }\r\n\r\n        // toggle between selecting existing genres and typing in a new genre\r\n        $scope.changeInputStyle = function () {\r\n            $scope.isCustomGenre ? $scope.isCustomGenre = false : $scope.isCustomGenre = true;\r\n            $scope.genreButtonText == 'Neues Genre anlegen' ? $scope.genreButtonText = 'Vorhandenes Genre auswählen' : $scope.genreButtonText = 'Neues Genre anlegen';\r\n        };\r\n\r\n        $scope.priceValidation = function () {\r\n            $scope.isPriceTouched = true;\r\n            !validatePrice($scope.price) ? $scope.isPriceInvalid = true : $scope.isPriceInvalid = false;\r\n        };\r\n\r\n        $scope.imageToBase64 = function (input) {\r\n            if (input.files && input.files[0]) {\r\n                var reader = new FileReader();\r\n\r\n                reader.onload = function (e) {\r\n                    console.log('image successfully converted to Base64');\r\n                    $scope.image = e.target.result;\r\n                    $scope.$apply();\r\n                };\r\n\r\n                reader.readAsDataURL(input.files[0]);\r\n            }\r\n        };\r\n\r\n        $scope.isInt = function (n) {\r\n            n = parseInt(n);\r\n            return Number(n) === n && n % 1 === 0;\r\n        };\r\n\r\n        $scope.isFloat = function (n) {\r\n            n = parseFloat(n);\r\n            return Number(n) === n && n % 1 !== 0;\r\n        };\r\n\r\n        $scope.addArticle = function () {\r\n            $scope.isTouched = true;\r\n            $scope.isPriceTouched = true;\r\n            $scope.isPriceInvalid = false;\r\n            if ($scope.title && (($scope.selected.genre && !$scope.isCustomGenre) || ($scope.customGenre && $scope.isCustomGenre))\r\n                && $scope.price && ($scope.selected.platform.wiiu ||\r\n                $scope.selected.platform.windows || $scope.selected.platform.ps || $scope.selected.platform.xbox ||\r\n                $scope.selected.platform.osx) && $scope.release && $scope.language && $scope.minRam &&\r\n                $scope.minProcessor && $scope.description && $scope.image) {\r\n                if (!validatePrice($scope.price)) {\r\n                    toastr.warning('Ungültiger Preis!');\r\n                    $scope.isPriceInvalid = true;\r\n                } else if (!$scope.isInt($scope.minRam)) {\r\n                    toastr.warning('Der Arbeitsspeicher muss mit einer natürlichen Zahl angegeben werden!');\r\n                } else if (!$scope.isFloat($scope.minProcessor) && !$scope.isInt($scope.minProcessor)) {\r\n                    toastr.warning('Der Prozessor muss mit einer Zahl angegeben werden! Für Nachkommastellen den Punkt verwenden!');\r\n                } else {\r\n                    var date = new Date($scope.release).getTime();\r\n                    var data = {\r\n                        id : 2,\r\n                        name : $scope.title,\r\n                        genre : $scope.isCustomGenre ? $scope.customGenre : $scope.selected.genre,\r\n                        price : $scope.price,\r\n                        fsk : $scope.selected.fsk,\r\n                        platforms : checkPlatforms(),\r\n                        release : date.toString(),\r\n                        language : $scope.language,\r\n                        minRam : $scope.minRam,\r\n                        minProcessor : $scope.minProcessor,\r\n                        description : $scope.description,\r\n                        image : $scope.image\r\n                    };\r\n                    console.log(data);\r\n                    articles.addArticle(data)\r\n                        .then(function (response) {\r\n                            toastr.success(response);\r\n                            $state.go(\"home\");\r\n                        }, function (error) {\r\n                            if (!error) {\r\n                                toastr.error(\"Ein unbekannter Fehler ist aufgetreten!\");\r\n                            } else {\r\n                                toastr.error(error);\r\n                            }\r\n                        })\r\n                }\r\n            } else {\r\n                toastr.warning('Fehlende Informationen!');\r\n            }\r\n        }\r\n    }]);\n\r\nangular.module('app.genre', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('genre', {\r\n            url: '/genre/:name',\r\n            templateUrl: 'app/genre/genre.html',\r\n            controller: 'GenreCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('GenreCtrl', [\"$stateParams\", \"localStorageService\", \"$scope\", function ($stateParams, localStorageService, $scope) {\r\n        $scope.searchInput = \"\";\r\n        $scope.isAllGenres = false;\r\n\r\n        // get genre from URL parameters\r\n        $scope.genre = $stateParams.name;\r\n\r\n        // all articles\r\n        var articles = localStorageService.get('articles');\r\n\r\n        // only articles with matching genre\r\n        $scope.articles = {};\r\n\r\n        $scope.isArticles = false;\r\n        if ($scope.genre != 'Alle Spiele') {\r\n            angular.forEach(articles, function (item) {\r\n                if (item.genre == $scope.genre) {\r\n                    $scope.isArticles = true;\r\n                    $scope.articles[item.id] = item;\r\n                }\r\n            });\r\n        } else {\r\n            $scope.isArticles = true;\r\n            $scope.isAllGenres = true;\r\n            $scope.articles = articles;\r\n        }\r\n    }]);\n\r\nangular.module('app.login', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('login', {\r\n            url: '/login',\r\n            templateUrl: 'app/login/login.html',\r\n            controller: 'LoginCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('LoginCtrl', [\"$scope\", \"$state\", \"localStorageService\", \"$rootScope\", \"$http\", \"user\", function ($scope, $state, localStorageService, $rootScope, $http, user) {\r\n        $scope.isFormTouched = false;\r\n        var username = localStorageService.get('user') || {};\r\n        var toCheckout = localStorageService.get('fromCheckout');\r\n        if (username.userName) {\r\n            toastr.info('Sie sind bereits eingeloogt als \"' + username.userName + '\"!');\r\n            $state.go('home');\r\n        }\r\n        $scope.data = {};\r\n        $scope.data.password = '';\r\n        $scope.data.userName = '';\r\n\r\n        //Trigger Login when enter pressed\r\n        $(\"#username\").keydown(function (event) {\r\n            if (event.keyCode == 13) {\r\n                $(\"#submit\").click();\r\n            }\r\n        });\r\n        $(\"#password\").keydown(function (event) {\r\n            if (event.keyCode == 13) {\r\n                $(\"#submit\").click();\r\n            }\r\n        });\r\n\r\n        $scope.login = function () {\r\n            $scope.isFormTouched = true;\r\n            if (!$scope.data.userName || !$scope.data.password) {\r\n                toastr.warning('<img src=\"assets/img/Epic_Mass_Facepalm.gif\"/>');\r\n                toastr.warning('You had one Job!');\r\n            } else {\r\n                var data = {\r\n                    userName: $scope.data.userName,\r\n                    password: $scope.data.password\r\n                };\r\n                user.login(data)\r\n                    .then(function (response) {\r\n                            toastr.success('Login war erfolgreich.');\r\n                            var user = {\r\n                                userName: $scope.data.userName,\r\n                                role: response.role,\r\n                                id: parseInt(response.id),\r\n                                // md5 encrypted\r\n                                password: response.password\r\n                            };\r\n                            localStorageService.set('user', user);\r\n                            $rootScope.$emit('login');\r\n                            localStorageService.remove('fromCheckout');\r\n                            if (toCheckout) {\r\n                                $state.go('checkout');\r\n                            } else {\r\n                                $state.go('home');\r\n                            }\r\n                    }, function (error) {\r\n                        if (error) {\r\n                            toastr.error(error);\r\n                        } else {\r\n                            toastr.error(\"Fehler bei der Verbindung zum Server!\");\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n    }]);\n\r\nangular.module('app.home', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('home', {\r\n            url: '/home',\r\n            templateUrl: 'app/home/home.html',\r\n            controller: 'HomeCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('HomeCtrl', function () {\r\n\r\n    });\n\r\nangular.module('app.newGames', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('newGames', {\r\n            url: '/newGames',\r\n            templateUrl: 'app/newGames/newGames.html',\r\n            controller: 'NewGamesCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('NewGamesCtrl', [\"$scope\", \"articles\", \"localStorageService\", function ($scope, articles, localStorageService) {\r\n        $scope.newGameIds = localStorageService.get(\"new-games\") || [];\r\n        $scope.articles = localStorageService.get(\"articles\") || {};\r\n        articles.getAllArticles()\r\n            .then(function () {\r\n                $scope.newGameIds = localStorageService.get(\"new-games\");\r\n                $scope.articles = localStorageService.get(\"articles\");\r\n            }, function (error) {\r\n                toastr.error(error);\r\n            });\r\n    }]);\n\r\nangular.module('app.orders', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('orders', {\r\n            url: '/orders',\r\n            templateUrl: 'app/orders/orders.html',\r\n            controller: 'OrdersCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('OrdersCtrl', [\"$scope\", \"$http\", \"localStorageService\", \"$state\", \"orders\", \"user\", \"$rootScope\", function ($scope, $http, localStorageService, $state, orders, user, $rootScope) {\r\n        var currentUser = localStorageService.get(\"user\") || {};\r\n        $scope.articles = localStorageService.get(\"articles\") || {};\r\n        if (angular.equals({}, currentUser)) {\r\n            toastr.info(\"Sie müssen sich einloggen, um diese Seite zu sehen\");\r\n            $state.go(\"login\");\r\n        } else {\r\n            user.authenticate(currentUser.userName, currentUser.password)\r\n                .then(function (response) {\r\n                    localStorageService.set(\"user\", response);\r\n                    currentUser = response;\r\n                    orders.getOrders(currentUser.id)\r\n                        .then(function (response) {\r\n                            $scope.orders = response;\r\n                        }, function (error) {\r\n                            if (error) {\r\n                                toastr.error(error);\r\n                            } else {\r\n                                toastr.error(\"Ein unbekannter Fehler ist aufgetreten!\");\r\n                            }\r\n                        });\r\n                }, function () {\r\n                    toastr.error(\"Fehler bei der Authentifizierung\");\r\n                    toastr.warning(\"Sie werden nun automatisch ausgeloggt\");\r\n                    $rootScope.logout();\r\n                });\r\n        }\r\n    }]);\n\r\nangular.module('app.topGames', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('topGames', {\r\n            url: '/topGames',\r\n            templateUrl: 'app/topGames/topGames.html',\r\n            controller: 'TopGamesCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('TopGamesCtrl', [\"$scope\", \"articles\", \"localStorageService\", function ($scope, articles, localStorageService) {\r\n        $scope.topGameIds = localStorageService.get(\"top-games\") || [];\r\n        $scope.articles = localStorageService.get(\"articles\") || {};\r\n        articles.getTopGames()\r\n            .then(function () {\r\n                $scope.topGameIds = localStorageService.get(\"top-games\")\r\n            }, function (error) {\r\n                toastr.error(error);\r\n            });\r\n        articles.getAllArticles()\r\n            .then(function () {\r\n                $scope.articles = localStorageService.get(\"articles\");\r\n            }, function (error) {\r\n                toastr.error(error);\r\n            });\r\n    }]);\n\r\nangular.module('app.userAdministration', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('userAdministration', {\r\n            url : '/userAdministration',\r\n            templateUrl : 'app/userAdministration/userAdministration.html',\r\n            controller : 'UserAdministrationCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('UserAdministrationCtrl', [\"$scope\", \"user\", \"localStorageService\", \"$state\", \"$rootScope\", function ($scope, user, localStorageService, $state, $rootScope) {\r\n        var currentUser = localStorageService.get(\"user\") || {};\r\n        if (angular.equals({}, currentUser)) {\r\n            toastr.info(\"Sie müssen sich einloggen, um diese Seite zu sehen\");\r\n            $state.go(\"login\");\r\n        } else {\r\n            user.authenticate(currentUser.userName, currentUser.password)\r\n                .then(function (response) {\r\n                    localStorageService.set(\"user\", response);\r\n                    currentUser = response;\r\n                    if (currentUser.role != \"admin\") {\r\n                        toastr.info(\"Diese Seite ist geschützt!\");\r\n                        $state.go(\"home\");\r\n                    } else {\r\n                        loadUsers();\r\n                    }\r\n                }, function () {\r\n                    toastr.error(\"Fehler bei der Authentifizierung\");\r\n                    toastr.warning(\"Sie werden nun automatisch ausgeloggt\");\r\n                    $rootScope.logout();\r\n                });\r\n        }\r\n\r\n        function loadUsers() {\r\n            user.getAllUsers()\r\n                .then(function (response) {\r\n                    $scope.users = response;\r\n                }, function (error) {\r\n                    if (error) {\r\n                        toastr.error(error);\r\n                    } else {\r\n                        toastr.error(\"Ein unbekannter Fehler ist aufgetreten!\");\r\n                    }\r\n                });\r\n        }\r\n\r\n        $scope.deleteUser = function (userName) {\r\n            user.deleteUser(userName)\r\n                .then(function (response) {\r\n                    toastr.success(response);\r\n                    loadUsers();\r\n                }, function (error) {\r\n                    toastr.error(error);\r\n                });\r\n        }\r\n    }]);\n\r\nangular.module('app')\r\n    .factory('articles', [\"$q\", \"$http\", \"localStorageService\", \"$rootScope\", \"$log\", \"$filter\", function ($q, $http, localStorageService, $rootScope, $log, $filter) {\r\n        var service = {};\r\n\r\n        service.getAllArticles = function () {\r\n            var q = $q.defer();\r\n            $http.get('http://localhost:8080/rest/article/get/all')\r\n                .then(function (response) {\r\n                    if (typeof response.data == 'string') {\r\n                        $log.error('loading articles failed: ', response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        var mapped = _mapArticles(response.data);\r\n                        localStorageService.set('articles', mapped);\r\n                        $rootScope.$emit(\"articles-loaded\");\r\n                        $log.info(\"articles loaded\");\r\n                        service.getNewGames(mapped);\r\n                        q.resolve(mapped);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error('loading articles failed: ', error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.addArticle = function (input) {\r\n            var q = $q.defer();\r\n            var data = {\r\n                ID : input.id.toString(),\r\n                Name : input.name,\r\n                Genre : input.genre,\r\n                Preis : input.price,\r\n                FSK : input.fsk,\r\n                Plattformen : input.platforms,\r\n                Release : input.release,\r\n                Sprache : input.language,\r\n                minRam : parseInt(input.minRam),\r\n                minProcessor : parseFloat(input.minProcessor),\r\n                Beschreibung : input.description,\r\n                image : input.image,\r\n                Rezensionen : []\r\n            };\r\n            $http.post('http://localhost:8080/rest/article/add', data)\r\n                .then(function (response) {\r\n                    if (response.data == \"Artikel existiert bereits\") {\r\n                        $log.error(\"error adding article: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else if (response.data == \"Artikel konnte nicht hinzugefügt werden\") {\r\n                        $log.error(\"error adding article: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"adding article was successful\");\r\n                        service.getAllArticles();\r\n                        q.resolve(response.data);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error adding article: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.addReview = function (input) {\r\n            var q = $q.defer();\r\n            var date = new Date().getTime();\r\n            var data = {\r\n                ID : '0',\r\n                idArticle : input.articleId.toString(),\r\n                stars : input.stars.toString(),\r\n                Autor : input.author,\r\n                Titel : input.title,\r\n                Text : input.message,\r\n                Datum : date.toString()\r\n            };\r\n            $http.post('http://localhost:8080/rest/review/add', data)\r\n                .then(function (response) {\r\n                    if (response.data == 'Rezension konnte nicht hinzugefügt werden') {\r\n                        $log.error(\"error adding review: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"adding review was successful\");\r\n                        service.getAllArticles();\r\n                        q.resolve(response.data);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error adding review: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.getTopGames = function () {\r\n            var q = $q.defer();\r\n            $http.get(\"http://localhost:8080/rest/article/get/top\")\r\n                .then(function (response) {\r\n                    if (typeof response.data == 'string') {\r\n                        $log.error(\"error getting top games: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        var top = [];\r\n                        angular.forEach(response.data, function (item) {\r\n                            top.push(parseInt(item.ID));\r\n                            localStorageService.set(\"top-games\", top);\r\n                        });\r\n                        $log.info(\"top games loaded\");\r\n                        q.resolve(top);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error getting top games: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.getNewGames = function (articles) {\r\n            var articlesArray = [];\r\n            angular.forEach(articles, function (item) {\r\n                item.release = parseInt(item.release);\r\n                articlesArray.push(item);\r\n            });\r\n            // sort articles by release date\r\n            var sorted = $filter('orderBy')(articlesArray, 'release', true);\r\n\r\n            // only take the top 5 elements\r\n            var sliced = sorted.slice(0, 5);\r\n            var newGamesIds = [];\r\n\r\n            // only save the id's to prevent redundant data\r\n            angular.forEach(sliced, function (item) {\r\n                newGamesIds.push(item.id);\r\n            });\r\n            localStorageService.set(\"new-games\", newGamesIds);\r\n        };\r\n\r\n\r\n        var _mapArticles = function (articles) {\r\n            var mappedItems = {};\r\n            var genres = [];\r\n\r\n            angular.forEach(articles, function (item) {\r\n                // check if current genre is a new genre\r\n                var isNewGenre = true;\r\n                angular.forEach(genres, function (genre) {\r\n                    if (item.Genre == genre) {\r\n                        isNewGenre = false;\r\n                    }\r\n                });\r\n\r\n                var mappedItem = {\r\n                    id : parseInt(item.ID),\r\n                    name : item.Name,\r\n                    genre : item.Genre,\r\n                    price : parseFloat(item.Preis),\r\n                    fsk : parseInt(item.FSK),\r\n                    platforms : trimPlatforms(item.Plattformen),\r\n                    release : item.Release,\r\n                    language : item.Sprache,\r\n                    minRam : item.minRam,\r\n                    minProcessor : item.minProcessor,\r\n                    image : item.image,\r\n                    description : item.Beschreibung,\r\n                    reviews : _mapReviews(item.Rezensionen)\r\n                };\r\n                if (isNewGenre) {\r\n                    genres.push(mappedItem.genre);\r\n                }\r\n                mappedItems[mappedItem.id] = mappedItem;\r\n            });\r\n            localStorageService.set('genres', genres);\r\n            return mappedItems;\r\n        };\r\n\r\n        // remove spaces\r\n        function trimPlatforms(input) {\r\n            var trimmed = [];\r\n            angular.forEach(input, function (item) {\r\n                trimmed.push(item.trim());\r\n            });\r\n            return trimmed;\r\n        }\r\n\r\n        var _mapReviews = function (reviews) {\r\n            var mappedItems = [];\r\n            angular.forEach(reviews, function (item) {\r\n                var mappedItem = {\r\n                    id : parseInt(item.ID),\r\n                    stars : parseInt(item.stars),\r\n                    author : item.Autor,\r\n                    title : item.Titel,\r\n                    message : item.Text,\r\n                    date : parseInt(item.Datum)\r\n                };\r\n                mappedItems.push(mappedItem);\r\n            });\r\n            return mappedItems || [];\r\n        };\r\n        return service;\r\n    }]);\n\r\n/*\r\n angular-md5 - v0.1.8\r\n 2015-11-17\r\n */\r\n\r\n/* commonjs package manager support (eg componentjs) */\r\nif (typeof module !== \"undefined\" && typeof exports !== \"undefined\" && module.exports === exports) {\r\n    module.exports = \"angular-md5\";\r\n}\r\n(function (angular) {\r\n    angular.module(\"angular-md5\", [\"gdi2290.md5\"]);\r\n    angular.module(\"ngMd5\", [\"gdi2290.md5\"]);\r\n    angular.module(\"gdi2290.md5\", [\"gdi2290.gravatar-filter\", \"gdi2290.md5-service\", \"gdi2290.md5-filter\"]);\r\nangular.module(\"gdi2290.gravatar-filter\", []).filter(\"gravatar\", [\"md5\", function (md5) {\r\n        var cache = {};\r\n        return function (text, defaultText) {\r\n            if (!cache[text]) {\r\n                defaultText = defaultText ? md5.createHash(defaultText.toString().toLowerCase()) : \"\";\r\n                cache[text] = text ? md5.createHash(text.toString().toLowerCase()) : defaultText;\r\n            }\r\n            return cache[text];\r\n        };\r\n    }]);\r\nangular.module(\"gdi2290.md5-filter\", []).filter(\"md5\", [\"md5\", function (md5) {\r\n        return function (text) {\r\n            return text ? md5.createHash(text.toString().toLowerCase()) : text;\r\n        };\r\n    }]);\r\nangular.module(\"gdi2290.md5-service\", []).factory(\"md5\", [function () {\r\n        var md5 = {\r\n            createHash : function (str) {\r\n                if (null === str) {\r\n                    return null;\r\n                }\r\n                var xl;\r\n                var rotateLeft = function (lValue, iShiftBits) {\r\n                    return lValue << iShiftBits | lValue >>> 32 - iShiftBits;\r\n                };\r\n                var addUnsigned = function (lX, lY) {\r\n                    var lX4, lY4, lX8, lY8, lResult;\r\n                    lX8 = lX & 2147483648;\r\n                    lY8 = lY & 2147483648;\r\n                    lX4 = lX & 1073741824;\r\n                    lY4 = lY & 1073741824;\r\n                    lResult = (lX & 1073741823) + (lY & 1073741823);\r\n                    if (lX4 & lY4) {\r\n                        return lResult ^ 2147483648 ^ lX8 ^ lY8;\r\n                    }\r\n                    if (lX4 | lY4) {\r\n                        if (lResult & 1073741824) {\r\n                            return lResult ^ 3221225472 ^ lX8 ^ lY8;\r\n                        } else {\r\n                            return lResult ^ 1073741824 ^ lX8 ^ lY8;\r\n                        }\r\n                    } else {\r\n                        return lResult ^ lX8 ^ lY8;\r\n                    }\r\n                };\r\n                var _F = function (x, y, z) {\r\n                    return x & y | ~x & z;\r\n                };\r\n                var _G = function (x, y, z) {\r\n                    return x & z | y & ~z;\r\n                };\r\n                var _H = function (x, y, z) {\r\n                    return x ^ y ^ z;\r\n                };\r\n                var _I = function (x, y, z) {\r\n                    return y ^ (x | ~z);\r\n                };\r\n                var _FF = function (a, b, c, d, x, s, ac) {\r\n                    a = addUnsigned(a, addUnsigned(addUnsigned(_F(b, c, d), x), ac));\r\n                    return addUnsigned(rotateLeft(a, s), b);\r\n                };\r\n                var _GG = function (a, b, c, d, x, s, ac) {\r\n                    a = addUnsigned(a, addUnsigned(addUnsigned(_G(b, c, d), x), ac));\r\n                    return addUnsigned(rotateLeft(a, s), b);\r\n                };\r\n                var _HH = function (a, b, c, d, x, s, ac) {\r\n                    a = addUnsigned(a, addUnsigned(addUnsigned(_H(b, c, d), x), ac));\r\n                    return addUnsigned(rotateLeft(a, s), b);\r\n                };\r\n                var _II = function (a, b, c, d, x, s, ac) {\r\n                    a = addUnsigned(a, addUnsigned(addUnsigned(_I(b, c, d), x), ac));\r\n                    return addUnsigned(rotateLeft(a, s), b);\r\n                };\r\n                var convertToWordArray = function (str) {\r\n                    var lWordCount;\r\n                    var lMessageLength = str.length;\r\n                    var lNumberOfWords_temp1 = lMessageLength + 8;\r\n                    var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;\r\n                    var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\r\n                    var lWordArray = new Array(lNumberOfWords - 1);\r\n                    var lBytePosition = 0;\r\n                    var lByteCount = 0;\r\n                    while (lByteCount < lMessageLength) {\r\n                        lWordCount = (lByteCount - lByteCount % 4) / 4;\r\n                        lBytePosition = lByteCount % 4 * 8;\r\n                        lWordArray[lWordCount] = lWordArray[lWordCount] | str.charCodeAt(lByteCount) << lBytePosition;\r\n                        lByteCount++;\r\n                    }\r\n                    lWordCount = (lByteCount - lByteCount % 4) / 4;\r\n                    lBytePosition = lByteCount % 4 * 8;\r\n                    lWordArray[lWordCount] = lWordArray[lWordCount] | 128 << lBytePosition;\r\n                    lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\r\n                    lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\r\n                    return lWordArray;\r\n                };\r\n                var wordToHex = function (lValue) {\r\n                    var wordToHexValue = \"\", wordToHexValue_temp = \"\", lByte, lCount;\r\n                    for (lCount = 0; lCount <= 3; lCount++) {\r\n                        lByte = lValue >>> lCount * 8 & 255;\r\n                        wordToHexValue_temp = \"0\" + lByte.toString(16);\r\n                        wordToHexValue = wordToHexValue + wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);\r\n                    }\r\n                    return wordToHexValue;\r\n                };\r\n                var x = [], k, AA, BB, CC, DD, a, b, c, d, S11 = 7, S12 = 12, S13 = 17, S14 = 22, S21 = 5, S22 = 9, S23 = 14, S24 = 20, S31 = 4, S32 = 11, S33 = 16, S34 = 23, S41 = 6, S42 = 10, S43 = 15, S44 = 21;\r\n                x = convertToWordArray(str);\r\n                a = 1732584193;\r\n                b = 4023233417;\r\n                c = 2562383102;\r\n                d = 271733878;\r\n                xl = x.length;\r\n                for (k = 0; k < xl; k += 16) {\r\n                    AA = a;\r\n                    BB = b;\r\n                    CC = c;\r\n                    DD = d;\r\n                    a = _FF(a, b, c, d, x[k + 0], S11, 3614090360);\r\n                    d = _FF(d, a, b, c, x[k + 1], S12, 3905402710);\r\n                    c = _FF(c, d, a, b, x[k + 2], S13, 606105819);\r\n                    b = _FF(b, c, d, a, x[k + 3], S14, 3250441966);\r\n                    a = _FF(a, b, c, d, x[k + 4], S11, 4118548399);\r\n                    d = _FF(d, a, b, c, x[k + 5], S12, 1200080426);\r\n                    c = _FF(c, d, a, b, x[k + 6], S13, 2821735955);\r\n                    b = _FF(b, c, d, a, x[k + 7], S14, 4249261313);\r\n                    a = _FF(a, b, c, d, x[k + 8], S11, 1770035416);\r\n                    d = _FF(d, a, b, c, x[k + 9], S12, 2336552879);\r\n                    c = _FF(c, d, a, b, x[k + 10], S13, 4294925233);\r\n                    b = _FF(b, c, d, a, x[k + 11], S14, 2304563134);\r\n                    a = _FF(a, b, c, d, x[k + 12], S11, 1804603682);\r\n                    d = _FF(d, a, b, c, x[k + 13], S12, 4254626195);\r\n                    c = _FF(c, d, a, b, x[k + 14], S13, 2792965006);\r\n                    b = _FF(b, c, d, a, x[k + 15], S14, 1236535329);\r\n                    a = _GG(a, b, c, d, x[k + 1], S21, 4129170786);\r\n                    d = _GG(d, a, b, c, x[k + 6], S22, 3225465664);\r\n                    c = _GG(c, d, a, b, x[k + 11], S23, 643717713);\r\n                    b = _GG(b, c, d, a, x[k + 0], S24, 3921069994);\r\n                    a = _GG(a, b, c, d, x[k + 5], S21, 3593408605);\r\n                    d = _GG(d, a, b, c, x[k + 10], S22, 38016083);\r\n                    c = _GG(c, d, a, b, x[k + 15], S23, 3634488961);\r\n                    b = _GG(b, c, d, a, x[k + 4], S24, 3889429448);\r\n                    a = _GG(a, b, c, d, x[k + 9], S21, 568446438);\r\n                    d = _GG(d, a, b, c, x[k + 14], S22, 3275163606);\r\n                    c = _GG(c, d, a, b, x[k + 3], S23, 4107603335);\r\n                    b = _GG(b, c, d, a, x[k + 8], S24, 1163531501);\r\n                    a = _GG(a, b, c, d, x[k + 13], S21, 2850285829);\r\n                    d = _GG(d, a, b, c, x[k + 2], S22, 4243563512);\r\n                    c = _GG(c, d, a, b, x[k + 7], S23, 1735328473);\r\n                    b = _GG(b, c, d, a, x[k + 12], S24, 2368359562);\r\n                    a = _HH(a, b, c, d, x[k + 5], S31, 4294588738);\r\n                    d = _HH(d, a, b, c, x[k + 8], S32, 2272392833);\r\n                    c = _HH(c, d, a, b, x[k + 11], S33, 1839030562);\r\n                    b = _HH(b, c, d, a, x[k + 14], S34, 4259657740);\r\n                    a = _HH(a, b, c, d, x[k + 1], S31, 2763975236);\r\n                    d = _HH(d, a, b, c, x[k + 4], S32, 1272893353);\r\n                    c = _HH(c, d, a, b, x[k + 7], S33, 4139469664);\r\n                    b = _HH(b, c, d, a, x[k + 10], S34, 3200236656);\r\n                    a = _HH(a, b, c, d, x[k + 13], S31, 681279174);\r\n                    d = _HH(d, a, b, c, x[k + 0], S32, 3936430074);\r\n                    c = _HH(c, d, a, b, x[k + 3], S33, 3572445317);\r\n                    b = _HH(b, c, d, a, x[k + 6], S34, 76029189);\r\n                    a = _HH(a, b, c, d, x[k + 9], S31, 3654602809);\r\n                    d = _HH(d, a, b, c, x[k + 12], S32, 3873151461);\r\n                    c = _HH(c, d, a, b, x[k + 15], S33, 530742520);\r\n                    b = _HH(b, c, d, a, x[k + 2], S34, 3299628645);\r\n                    a = _II(a, b, c, d, x[k + 0], S41, 4096336452);\r\n                    d = _II(d, a, b, c, x[k + 7], S42, 1126891415);\r\n                    c = _II(c, d, a, b, x[k + 14], S43, 2878612391);\r\n                    b = _II(b, c, d, a, x[k + 5], S44, 4237533241);\r\n                    a = _II(a, b, c, d, x[k + 12], S41, 1700485571);\r\n                    d = _II(d, a, b, c, x[k + 3], S42, 2399980690);\r\n                    c = _II(c, d, a, b, x[k + 10], S43, 4293915773);\r\n                    b = _II(b, c, d, a, x[k + 1], S44, 2240044497);\r\n                    a = _II(a, b, c, d, x[k + 8], S41, 1873313359);\r\n                    d = _II(d, a, b, c, x[k + 15], S42, 4264355552);\r\n                    c = _II(c, d, a, b, x[k + 6], S43, 2734768916);\r\n                    b = _II(b, c, d, a, x[k + 13], S44, 1309151649);\r\n                    a = _II(a, b, c, d, x[k + 4], S41, 4149444226);\r\n                    d = _II(d, a, b, c, x[k + 11], S42, 3174756917);\r\n                    c = _II(c, d, a, b, x[k + 2], S43, 718787259);\r\n                    b = _II(b, c, d, a, x[k + 9], S44, 3951481745);\r\n                    a = addUnsigned(a, AA);\r\n                    b = addUnsigned(b, BB);\r\n                    c = addUnsigned(c, CC);\r\n                    d = addUnsigned(d, DD);\r\n                }\r\n                var temp = wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d);\r\n                return temp.toLowerCase();\r\n            }\r\n        };\r\n        return md5;\r\n    }]);\r\n})(angular);\n\r\nangular.module('app')\r\n    .factory('orders', [\"$q\", \"$http\", \"localStorageService\", \"$log\", function ($q, $http, localStorageService, $log) {\r\n        var service = {};\r\n\r\n        service.addOrder = function (input) {\r\n            var q = $q.defer();\r\n            var data = {\r\n                ID: '0',\r\n                idUser: input.userId.toString(),\r\n                Datum: input.date.toString(),\r\n                Preis: input.totalPrice.toString(),\r\n                Bestellungsartikel: mapCartItems(input.items)\r\n            };\r\n            $http.post(\"http://localhost:8080/rest/order/add\", data)\r\n                .then(function(response) {\r\n                    if (response.data == \"Bestellung konnte nicht hinzugefügt werden\") {\r\n                        $log.error(\"error adding order\");\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"order added\");\r\n                        q.resolve(response.data);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error adding order: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.getOrders = function (id) {\r\n            var q = $q.defer();\r\n            $http.get(\"http://localhost:8080/rest/order/get/\" + id)\r\n                .then(function (response) {\r\n                    if(response.data == \"Bestellungen konnten nicht geladen werden\") {\r\n                        $log.error(\"error loading orders\");\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        var orders = _mapOrders(response.data);\r\n                        $log.info(\"orders loaded\");\r\n                        q.resolve(orders);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error loading orders: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n\r\n            return q.promise;\r\n        };\r\n\r\n        function _mapOrders(input) {\r\n            var mapped = [];\r\n            angular.forEach(input, function (order) {\r\n                var mappedOrder = {};\r\n                mappedOrder = {\r\n                    id: parseInt(order.ID),\r\n                    userId: parseInt(order.idUser),\r\n                    date: parseInt(order.Datum),\r\n                    totalPrice: parseFloat(order.Preis),\r\n                    articles: _mapArticles(order.Bestellungsartikel)\r\n                };\r\n                mapped.push(mappedOrder);\r\n            });\r\n            return mapped;\r\n        }\r\n\r\n        function _mapArticles(input) {\r\n            var mapped = [];\r\n            angular.forEach(input, function (item) {\r\n                var mappedItem = {};\r\n                mappedItem = {\r\n                    id: parseInt(item.idArticle),\r\n                    quantity: parseInt(item.Anzahl),\r\n                    price: parseFloat(item.Preis),\r\n                    name: item.Name\r\n                };\r\n                mapped.push(mappedItem);\r\n            });\r\n            return mapped;\r\n        }\r\n\r\n        function mapCartItems(input) {\r\n            var articles = localStorageService.get(\"articles\") || {};\r\n            var mapped = [];\r\n            angular.forEach(input, function (item) {\r\n                var mappedItem = {};\r\n                if (articles[item.itemId]) {\r\n                    mappedItem = {\r\n                        idArticle : item.itemId.toString(),\r\n                        Name: articles[item.itemId].name,\r\n                        Anzahl : item.quantity.toString(),\r\n                        idOrder : '0',\r\n                        Preis : articles[item.itemId].price.toString()\r\n                    };\r\n                    mapped.push(mappedItem);\r\n                }\r\n            });\r\n            return mapped;\r\n        }\r\n\r\n        return service;\r\n    }]);\n\r\nangular.module('app')\r\n    .factory('user', [\"$q\", \"$http\", \"md5\", \"$log\", function ($q, $http, md5, $log) {\r\n        var service = {};\r\n\r\n        service.addUser = function (input) {\r\n            var q = $q.defer();\r\n            var data = {\r\n                ID : '0',\r\n                Benutzername : input.userName,\r\n                Passwort : input.password,\r\n                Email : input.email,\r\n                Rolle : input.role\r\n            };\r\n            $http.post('http://localhost:8080/rest/user/add', data)\r\n                .then(function (response) {\r\n                    if (response.data == \"User konnte nicht angelegt werden\" || response.data == \"User existiert bereits\") {\r\n                        $log.error(\"error adding user: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"user added\");\r\n                        q.resolve(response.data);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error adding user: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n            return q.promise;\r\n        };\r\n\r\n        service.login = function (input) {\r\n            var q = $q.defer();\r\n            $http.get('http://localhost:8080/rest/user/get/' + input.userName)\r\n                .then(function (response) {\r\n                    if (response.data == \"User konnten nicht geladen werden\") {\r\n                        $log.error(\"login failed - backend or database problem\");\r\n                        q.reject(response.data);\r\n                    } else if (response.data.Benutzername == \"null\") {\r\n                        $log.warn(\"login failed - username not correct\");\r\n                        q.reject(\"Benutzer existiert nicht!\")\r\n                    } else if (response.data.Passwort === input.password) {\r\n                        $log.info(\"user logged in\");\r\n                        // encrypt password with md5 to save it to localstorage later\r\n                        q.resolve({role : response.data.Rolle, id : response.data.ID, password : md5.createHash(response.data.Passwort)});\r\n                    } else {\r\n                        $log.warn(\"login failed - password is wrong\");\r\n                        q.reject(\"Passwort falsch!\");\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"login failed: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n\r\n            return q.promise;\r\n        };\r\n\r\n        service.getAllUsers = function () {\r\n            var q = $q.defer();\r\n\r\n            $http.get(\"http://localhost:8080/rest/users/get\")\r\n                .then(function (response) {\r\n                    if (typeof response.data == 'string') {\r\n                        $log.error(\"error getting all users: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"users loaded\");\r\n                        var users = _mapUsers(response.data);\r\n                        q.resolve(users);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error getting all users: \", error);\r\n                    q.reject(error);\r\n                });\r\n\r\n            return q.promise;\r\n        };\r\n\r\n\r\n        // send username and get id and role\r\n        // localstorage values can be edited by user\r\n        // prevents that users can access admin sites by changing the role in the localstorage\r\n\r\n        service.authenticate = function (userName, md5Password) {\r\n            var q = $q.defer();\r\n            $http.get('http://localhost:8080/rest/user/get/' + userName)\r\n                .then(function (response) {\r\n                    if (response.data == \"User konnten nicht geladen werden\") {\r\n                        $log.error(\"authentication failed - backend or database problem\");\r\n                        q.reject(response.data);\r\n                    } else if (response.data.Benutzername == \"null\") {\r\n                        $log.warn(\"authentication failed - user does not exist\");\r\n                        q.reject(\"Benutzer existiert nicht!\");\r\n                    // check if encrypted password from localstorage matches with the password from backend\r\n                    } else if (md5.createHash(response.data.Passwort) === md5Password){\r\n                        $log.info(\"authentication was successful\");\r\n                        q.resolve({role : response.data.Rolle, id : parseInt(response.data.ID), userName : userName, password: md5Password});\r\n                    } else {\r\n                        $log.warn(\"authentication failed - password wrong\");\r\n                        q.reject(\"Authentifizierung fehlgeschlagen\");\r\n                    }\r\n                }, function (error) {\r\n                    $log.warn(\"authentication failed: \", error);\r\n                    q.reject(error.statusText);\r\n                });\r\n\r\n            return q.promise;\r\n        };\r\n\r\n        service.deleteUser = function (userName) {\r\n            var q = $q.defer();\r\n\r\n            $http.get(\"http://localhost:8080/rest/user/delete/\" + userName)\r\n                .then(function (response) {\r\n                    if (response.data == \"User existiert nicht\" || response.data == \"Hat nicht funktioniert\") {\r\n                        $log.error(\"error deleting user: \", response.data);\r\n                        q.reject(response.data);\r\n                    } else {\r\n                        $log.info(\"user deleted\");\r\n                        q.resolve(response.data);\r\n                    }\r\n                }, function (error) {\r\n                    $log.error(\"error deleting user: \", error);\r\n                    q.reject(error);\r\n                });\r\n\r\n            return q.promise;\r\n        };\r\n\r\n        function _mapUsers(input) {\r\n            var mapped = [];\r\n\r\n            angular.forEach(input, function (user) {\r\n                var mappedItem = {};\r\n                mappedItem = {\r\n                    id : parseInt(user.ID),\r\n                    userName : user.Benutzername,\r\n                    email : user.Email,\r\n                    role : user.Rolle\r\n                };\r\n                mapped.push(mappedItem);\r\n            });\r\n            return mapped;\r\n        }\r\n\r\n        return service;\r\n    }]);\n\r\nangular.module('app.gameDetail')\r\n    .controller('RatingCtrl', [\"$scope\", \"$uibModalInstance\", \"stars\", \"title\", \"message\", function ($scope, $uibModalInstance, stars, title, message) {\r\n        \r\n        $scope.stars = stars;\r\n        $scope.message = message;\r\n        $scope.title = title;\r\n        title ? $scope.isNewReview = false: $scope.isNewReview = true;\r\n\r\n        // check if inputs are empty\r\n        $scope.checkValid = function () {\r\n            $scope.message && $scope.title ? $scope.isValid = true : $scope.isValid = false;\r\n        };\r\n        $scope.checkValid();\r\n\r\n        $scope.submit = function () {\r\n            var result = {\r\n                title: $scope.title,\r\n                message: $scope.message,\r\n                stars: $scope.stars\r\n            };\r\n            $uibModalInstance.close(result);\r\n        };\r\n        $scope.cancel = function () {\r\n            $uibModalInstance.dismiss();\r\n        };\r\n    }]);\n\r\nangular.module('app.checkout', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('checkout', {\r\n            url : '/checkout',\r\n            templateUrl : 'app/cart/checkout/checkout.html',\r\n            controller : 'CheckoutCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('CheckoutCtrl', [\"$scope\", \"localStorageService\", \"$state\", \"orders\", function ($scope, localStorageService, $state, orders) {\r\n        var user = localStorageService.get('user') || {};\r\n        if (!user.userName) {\r\n            // if user wants to order something but isn't logged in, he will be directed to the checkout after login\r\n            localStorageService.set('fromCheckout', true);\r\n            toastr.info('Bitte melden Sie sich an.');\r\n            $state.go('login');\r\n        }\r\n        $scope.cart = localStorageService.get('cart') || {};\r\n\r\n        // if nothing in cart, no checkout\r\n        if (angular.equals({}, $scope.cart)) {\r\n            $state.go(\"home\");\r\n        }\r\n\r\n        $scope.articles = localStorageService.get('articles') || {};\r\n\r\n        $scope.updateTotalPrice = function () {\r\n            $scope.totalPrice = 0;\r\n            angular.forEach($scope.cart, function (item) {\r\n                $scope.totalPrice += item.quantity * $scope.articles[item.itemId].price;\r\n            });\r\n        };\r\n\r\n        $scope.addOrder = function () {\r\n            var cart = localStorageService.get(\"cart\");\r\n            var data = {\r\n                userId : user.id,\r\n                date : new Date().getTime(),\r\n                totalPrice : $scope.totalPrice,\r\n                items : cart\r\n            };\r\n            orders.addOrder(data)\r\n                .then(function (response) {\r\n                    toastr.success(response);\r\n                    localStorageService.remove(\"cart\");\r\n                    $state.go(\"orders\");\r\n                }, function (error) {\r\n                    if (!error) {\r\n                        toastr.error(\"Ein unbekannter Fehler ist aufgetreten!\");\r\n                    } else {\r\n                        toastr.error(error);\r\n                    }\r\n                });\r\n        };\r\n        $scope.updateTotalPrice();\r\n\r\n    }]);\n\r\nangular.module('app.register', [])\r\n\r\n    .config([\"$stateProvider\", function ($stateProvider) {\r\n        $stateProvider.state('register', {\r\n            url: '/register',\r\n            templateUrl: 'app/login/register/register.html',\r\n            controller: 'RegisterCtrl'\r\n        });\r\n    }])\r\n\r\n    .controller('RegisterCtrl', [\"$scope\", \"user\", \"$state\", function ($scope, user, $state) {\r\n        $scope.data = {};\r\n        $scope.data.userName = '';\r\n        $scope.data.email = '';\r\n        $scope.data.password = '';\r\n        $scope.data.passwordConfirm = '';\r\n        $scope.isTouched = false;\r\n\r\n        // email regex\r\n        $scope.pattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n\r\n        $scope.register = function () {\r\n            $scope.isTouched = true;\r\n            if (!$scope.data.userName || !$scope.data.password || !$scope.data.passwordConfirm) {\r\n                toastr.warning('Alle Felder müssen ausgefüllt werden!', 'Fehlende Informationen!');\r\n            } else if (!$scope.data.email || !$scope.pattern.test($scope.data.email)) {\r\n                toastr.warning('Die Email-Adresse ist ungültig!', 'Fehlerhafte Informationen!');\r\n            } else if ($scope.data.password != $scope.data.passwordConfirm) {\r\n                toastr.warning('Die Passwörter stimmen nicht überein.', 'Fehlerhafte Informationen!');\r\n            } else if ($scope.data.userName.length < 4) {\r\n                toastr.warning('Benutzername zu kurz!');\r\n            } else if ($scope.data.password.length < 6) {\r\n                toastr.warning('Passwort zu kurz!');\r\n            } else {\r\n                var data = {\r\n                    userName: $scope.data.userName,\r\n                    password: $scope.data.password,\r\n                    email: $scope.data.email,\r\n                    role: 'user'\r\n                };\r\n                user.addUser(data)\r\n                    .then(function() {\r\n                        toastr.success(\"Der Benutzer wurde erfolgreich angelegt!\");\r\n                        $state.go('login');\r\n                        toastr.info(\"Bitte loggen Sie sich mit den neuen Daten an.\");\r\n                    }, function (error) {\r\n                        if (error) {\r\n                            toastr.error(error);\r\n                        } else {\r\n                            toastr.error(\"Fehler bei der Verbindung zum Server!\");\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n    }]);\n\n})(window, document);\n"],"sourceRoot":"/source/"}